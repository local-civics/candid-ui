"use strict";(self.webpackChunk_local_civics_candid_ui=self.webpackChunk_local_civics_candid_ui||[]).push([[5442],{"./node_modules/@babel/runtime/helpers/esm/construct.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_construct});var setPrototypeOf=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function _construct(Parent,args,Class){return _construct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&(0,setPrototypeOf.Z)(instance,Class.prototype),instance},_construct.apply(null,arguments)}},"./node_modules/@tabler/icons-react/dist/esm/icons/IconChartArrows.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>IconChartArrows});var IconChartArrows=(0,__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/createReactComponent.js").Z)("chart-arrows","IconChartArrows",[["path",{d:"M3 18l14 0",key:"svg-0"}],["path",{d:"M9 9l3 3l-3 3",key:"svg-1"}],["path",{d:"M14 15l3 3l-3 3",key:"svg-2"}],["path",{d:"M3 3l0 18",key:"svg-3"}],["path",{d:"M3 12l9 0",key:"svg-4"}],["path",{d:"M18 3l3 3l-3 3",key:"svg-5"}],["path",{d:"M3 6l18 0",key:"svg-6"}]])},"./node_modules/@tabler/icons-react/dist/esm/icons/IconListNumbers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>IconListNumbers});var IconListNumbers=(0,__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/createReactComponent.js").Z)("list-numbers","IconListNumbers",[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]])},"./node_modules/export-to-csv/build/export-to-csv.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0});var CsvConfigConsts=function(){function CsvConfigConsts(){}return CsvConfigConsts.EOL="\r\n",CsvConfigConsts.BOM="\ufeff",CsvConfigConsts.DEFAULT_FIELD_SEPARATOR=",",CsvConfigConsts.DEFAULT_DECIMAL_SEPARATOR=".",CsvConfigConsts.DEFAULT_QUOTE='"',CsvConfigConsts.DEFAULT_SHOW_TITLE=!1,CsvConfigConsts.DEFAULT_TITLE="My Generated Report",CsvConfigConsts.DEFAULT_FILENAME="generated",CsvConfigConsts.DEFAULT_SHOW_LABELS=!1,CsvConfigConsts.DEFAULT_USE_TEXT_FILE=!1,CsvConfigConsts.DEFAULT_USE_BOM=!0,CsvConfigConsts.DEFAULT_HEADER=[],CsvConfigConsts.DEFAULT_KEYS_AS_HEADERS=!1,CsvConfigConsts}();exports.CsvConfigConsts=CsvConfigConsts,exports.ConfigDefaults={filename:CsvConfigConsts.DEFAULT_FILENAME,fieldSeparator:CsvConfigConsts.DEFAULT_FIELD_SEPARATOR,quoteStrings:CsvConfigConsts.DEFAULT_QUOTE,decimalSeparator:CsvConfigConsts.DEFAULT_DECIMAL_SEPARATOR,showLabels:CsvConfigConsts.DEFAULT_SHOW_LABELS,showTitle:CsvConfigConsts.DEFAULT_SHOW_TITLE,title:CsvConfigConsts.DEFAULT_TITLE,useTextFile:CsvConfigConsts.DEFAULT_USE_TEXT_FILE,useBom:CsvConfigConsts.DEFAULT_USE_BOM,headers:CsvConfigConsts.DEFAULT_HEADER,useKeysAsHeaders:CsvConfigConsts.DEFAULT_KEYS_AS_HEADERS};var ExportToCsv=function(){function ExportToCsv(options){this._csv="";var config=options||{};this._options=objectAssign({},exports.ConfigDefaults,config),this._options.useKeysAsHeaders&&this._options.headers&&this._options.headers.length>0&&console.warn("Option to use object keys as headers was set, but headers were still passed!")}return Object.defineProperty(ExportToCsv.prototype,"options",{get:function(){return this._options},set:function(options){this._options=objectAssign({},exports.ConfigDefaults,options)},enumerable:!0,configurable:!0}),ExportToCsv.prototype.generateCsv=function(jsonData,shouldReturnCsv){if(void 0===shouldReturnCsv&&(shouldReturnCsv=!1),this._csv="",this._parseData(jsonData),this._options.useBom&&(this._csv+=CsvConfigConsts.BOM),this._options.showTitle&&(this._csv+=this._options.title+"\r\n\n"),this._getHeaders(),this._getBody(),""!=this._csv){if(shouldReturnCsv)return this._csv;var FileType=this._options.useTextFile?"plain":"csv",fileExtension=this._options.useTextFile?".txt":".csv",blob=new Blob([this._csv],{type:"text/"+FileType+";charset=utf8;"});if(navigator.msSaveBlob){var filename=this._options.filename.replace(/ /g,"_")+fileExtension;navigator.msSaveBlob(blob,filename)}else{this._options.useTextFile,encodeURI(this._csv);var link=document.createElement("a");link.href=URL.createObjectURL(blob),link.setAttribute("visibility","hidden"),link.download=this._options.filename.replace(/ /g,"_")+fileExtension,document.body.appendChild(link),link.click(),document.body.removeChild(link)}}else console.log("Invalid data")},ExportToCsv.prototype._getHeaders=function(){if(this._options.showLabels||this._options.useKeysAsHeaders){var headers=this._options.useKeysAsHeaders?Object.keys(this._data[0]):this._options.headers;if(headers.length>0){for(var row="",keyPos=0;keyPos<headers.length;keyPos++)row+=headers[keyPos]+this._options.fieldSeparator;row=row.slice(0,-1),this._csv+=row+CsvConfigConsts.EOL}}},ExportToCsv.prototype._getBody=function(){for(var keys=Object.keys(this._data[0]),i=0;i<this._data.length;i++){for(var row="",keyPos=0;keyPos<keys.length;keyPos++){var key=keys[keyPos];row+=this._formatData(this._data[i][key])+this._options.fieldSeparator}row=row.slice(0,-1),this._csv+=row+CsvConfigConsts.EOL}},ExportToCsv.prototype._formatData=function(data){return"locale"===this._options.decimalSeparator&&this._isFloat(data)?data.toLocaleString():"."!==this._options.decimalSeparator&&this._isFloat(data)?data.toString().replace(".",this._options.decimalSeparator):"string"==typeof data?(data=data.replace(/"/g,'""'),(this._options.quoteStrings||data.indexOf(",")>-1||data.indexOf("\n")>-1||data.indexOf("\r")>-1)&&(data=this._options.quoteStrings+data+this._options.quoteStrings),data):"boolean"==typeof data?data?"TRUE":"FALSE":data},ExportToCsv.prototype._isFloat=function(input){return+input===input&&(!isFinite(input)||Boolean(input%1))},ExportToCsv.prototype._parseData=function(jsonData){return this._data="object"!=typeof jsonData?JSON.parse(jsonData):jsonData,this._data},ExportToCsv}();exports.ExportToCsv=ExportToCsv;var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function objectAssign(target){for(var from,source=[],_i=1;_i<arguments.length;_i++)source[_i-1]=arguments[_i];for(var symbols,to=function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},"./node_modules/export-to-csv/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__("./node_modules/export-to-csv/build/export-to-csv.js"))},"./node_modules/react-charts/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0;return function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}__webpack_require__.d(__webpack_exports__,{k:()=>Chart});var objectWithoutPropertiesLoose=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js");function sum(values,valueof){let sum=0;if(void 0===valueof)for(let value of values)(value=+value)&&(sum+=value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&(sum+=value)}return sum}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function sort(values,...F){if("function"!=typeof values[Symbol.iterator])throw new TypeError("values is not iterable");values=Array.from(values);let[f=ascending]=F;if(1===f.length||F.length>1){const index=Uint32Array.from(values,((d,i)=>i));return F.length>1?(F=F.map((f=>values.map(f))),index.sort(((i,j)=>{for(const f of F){const c=ascending(f[i],f[j]);if(c)return c}}))):(f=values.map(f),index.sort(((i,j)=>ascending(f[i],f[j])))),function permute(source,keys){return Array.from(keys,(key=>source[key]))}(values,index)}return values.sort(f)}class InternMap extends Map{constructor(entries,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}class InternSet extends Set{constructor(values,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=values)for(const value of values)this.add(value)}has(value){return super.has(intern_get(this,value))}add(value){return super.add(intern_set(this,value))}delete(value){return super.delete(intern_delete(this,value))}}function intern_get({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):(_intern.set(key,value),value)}function intern_delete({_intern,_key},value){const key=_key(value);return _intern.has(key)&&(value=_intern.get(value),_intern.delete(key)),value}function keyof(value){return null!==value&&"object"==typeof value?value.valueOf():value}function src_identity(x){return x}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new InternMap,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}var react=__webpack_require__("./node_modules/react/index.js");function useGetLatest(obj){var ref=react.useRef(obj),getterRef=react.useRef();return ref.current=obj,getterRef.current||(getterRef.current=function(){return ref.current}),getterRef.current}const useIsomorphicLayoutEffect="undefined"!=typeof window?react.useLayoutEffect:react.useEffect;var elementTypes=["area","line","rectangle","circle"];function materializeStyles(style,defaults){void 0===style&&(style={}),void 0===defaults&&(defaults={}),style=function normalizeColor(style,defaults){return(0,esm_extends.Z)({},style,{stroke:style.stroke||style.color||defaults.stroke||defaults.color,fill:style.fill||style.color||defaults.fill||defaults.color})}(style,defaults);for(var i=0;i<elementTypes.length;i++){var type=elementTypes[i];style[type]&&defaults[type]&&(style[type]=materializeStyles(style[type],defaults))}return style}function translate(x,y){return"translate3d("+Math.round(x)+"px, "+Math.round(y)+"px, 0)"}function isDefined(num){return"number"==typeof num&&!Number.isNaN(num)}var chartContext=react.createContext(null);function ChartContextProvider(_ref){var value=_ref.value,children=_ref.children;return react.createElement(chartContext.Provider,{value,children})}function useChartContext(){return react.useContext(chartContext)()}function BarComponent(_ref){var primaryAxis=_ref.primaryAxis,secondaryAxis=_ref.secondaryAxis,allSeries=_ref.series,_useChartContext=useChartContext(),getSeriesStatusStyle=_useChartContext.getSeriesStatusStyle,getDatumStatusStyle=_useChartContext.getDatumStatusStyle,focusedDatumState=_useChartContext.focusedDatumState,gridDimensions=_useChartContext.gridDimensions,focusedDatum=focusedDatumState[0],xAxis=primaryAxis.isVertical?secondaryAxis:primaryAxis,yAxis=primaryAxis.isVertical?primaryAxis:secondaryAxis;return react.createElement("g",{style:{transform:translate(gridDimensions.left,gridDimensions.top)}},allSeries.map((function(series,i){var style=getSeriesStatusStyle(series,focusedDatum);return react.createElement("g",{key:"lines-"+i},series.datums.map((function(datum,i){var _getRectX,_getWidth,_getRectY,_getHeight,dataStyle=getDatumStatusStyle(datum,focusedDatum),_clampPxToAxis=clampPxToAxis(null!=(_getRectX=function getRectX(datum,primaryAxis,secondaryAxis){return primaryAxis.isVertical?getSecondaryStart(datum,secondaryAxis):getPrimary(datum,primaryAxis,secondaryAxis)}(datum,primaryAxis,secondaryAxis))?_getRectX:NaN,null!=(_getWidth=function getWidth(datum,primaryAxis,secondaryAxis){return primaryAxis.isVertical?getSecondaryLength(datum,secondaryAxis):getPrimaryLength(datum,primaryAxis,secondaryAxis)}(datum,primaryAxis,secondaryAxis))?_getWidth:NaN,xAxis),x=_clampPxToAxis[0],width=_clampPxToAxis[1],_clampPxToAxis2=clampPxToAxis(null!=(_getRectY=function getRectY(datum,primaryAxis,secondaryAxis){return primaryAxis.isVertical?getPrimary(datum,primaryAxis,secondaryAxis):getSecondary(datum,secondaryAxis)}(datum,primaryAxis,secondaryAxis))?_getRectY:NaN,null!=(_getHeight=function getHeight(datum,primaryAxis,secondaryAxis){return primaryAxis.isVertical?getPrimaryLength(datum,primaryAxis,secondaryAxis):getSecondaryLength(datum,secondaryAxis)}(datum,primaryAxis,secondaryAxis))?_getHeight:NaN,yAxis),y=_clampPxToAxis2[0],height=_clampPxToAxis2[1];return react.createElement("rect",{ref:function ref(el){datum.element=el},key:i,x,y,width,height,style:(0,esm_extends.Z)({strokeWidth:0},style,style.rectangle,dataStyle,dataStyle.rectangle)})})))})))}function getPrimaryGroupLength(_datum,primaryAxis){return Math.max(primaryAxis.primaryBandScale.bandwidth(),1)}function getPrimaryLength(_datum,primaryAxis,secondaryAxis){if("band"===primaryAxis.axisFamily){var _primaryAxis$minBandS,_primaryAxis$maxBandS,bandWidth=secondaryAxis.stacked?primaryAxis.scale.bandwidth():primaryAxis.seriesBandScale.bandwidth();return Math.min(Math.max(bandWidth,null!=(_primaryAxis$minBandS=primaryAxis.minBandSize)?_primaryAxis$minBandS:1),null!=(_primaryAxis$maxBandS=primaryAxis.maxBandSize)?_primaryAxis$maxBandS:99999999)}return Math.max(secondaryAxis.stacked?primaryAxis.primaryBandScale.bandwidth():primaryAxis.seriesBandScale.bandwidth(),1)}function getSecondaryLength(datum,secondaryAxis){var secondary=[getSecondaryStart(datum,secondaryAxis),getSecondary(datum,secondaryAxis)];return Math.abs(secondary[1]-secondary[0])}function getPrimary(datum,primaryAxis,secondaryAxis){var _primaryAxis$scale,_seriesBandScale,primary=null!=(_primaryAxis$scale=primaryAxis.scale(datum.primaryValue))?_primaryAxis$scale:NaN;("band"!==primaryAxis.axisFamily&&(primary-=getPrimaryGroupLength(0,primaryAxis)/2),secondaryAxis.stacked)||(primary+=null!=(_seriesBandScale=primaryAxis.seriesBandScale(datum.seriesIndex))?_seriesBandScale:NaN);return primary}function getSecondaryStart(datum,secondaryAxis){var _secondaryAxis$scale2,_secondaryAxis$scale,_datum$stackData$,_datum$stackData;return secondaryAxis.stacked?null!=(_secondaryAxis$scale=secondaryAxis.scale(null!=(_datum$stackData$=null==(_datum$stackData=datum.stackData)?void 0:_datum$stackData[0])?_datum$stackData$:NaN))?_secondaryAxis$scale:NaN:null!=(_secondaryAxis$scale2=secondaryAxis.scale(datum.secondaryValue<0?datum.secondaryValue:0))?_secondaryAxis$scale2:NaN}function getSecondary(datum,secondaryAxis){var _secondaryAxis$scale4,_secondaryAxis$scale3,_datum$stackData$2,_datum$stackData2;return secondaryAxis.stacked?null!=(_secondaryAxis$scale3=secondaryAxis.scale(null!=(_datum$stackData$2=null==(_datum$stackData2=datum.stackData)?void 0:_datum$stackData2[1])?_datum$stackData$2:NaN))?_secondaryAxis$scale3:NaN:null!=(_secondaryAxis$scale4=secondaryAxis.scale(datum.secondaryValue<0?0:datum.secondaryValue))?_secondaryAxis$scale4:NaN}function clampPxToAxis(startPx,lengthPx,axis){var range=axis.scale.range();axis.isVertical&&range.reverse();var safe=function safe(num){return Math.max(range[0],Math.min(num,range[1]))},safeStart=safe(startPx);return[safeStart,safe(startPx+lengthPx)-safeStart]}const pi=Math.PI,tau=2*pi,tauEpsilon=tau-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%tau+tau),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};const src_path=path;Array.prototype.slice;function array(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}function src_constant(x){return function constant(){return x}}function Linear(context){this._context=context}function linear(context){return new Linear(context)}function point_x(p){return p[0]}function point_y(p){return p[1]}function line(x,y){var defined=src_constant(!0),context=null,curve=linear,output=null;function line(data){var i,d,buffer,n=(data=array(data)).length,defined0=!1;for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x(d,i,data),+y(d,i,data));if(buffer)return output=null,buffer+""||null}return x="function"==typeof x?x:void 0===x?point_x:src_constant(x),y="function"==typeof y?y:void 0===y?point_y:src_constant(y),line.x=function(_){return arguments.length?(x="function"==typeof _?_:src_constant(+_),line):x},line.y=function(_){return arguments.length?(y="function"==typeof _?_:src_constant(+_),line):y},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:src_constant(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line}function sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function _point(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}},MonotoneX.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,_point(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:_point(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function moveTo(x,y){this._context.moveTo(y,x)},closePath:function closePath(){this._context.closePath()},lineTo:function lineTo(x,y){this._context.lineTo(y,x)},bezierCurveTo:function bezierCurveTo(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}};var monotoneX=function monotoneX(context){return new MonotoneX(context)};function Line(_ref){var _secondaryAxis$curve,primaryAxis=_ref.primaryAxis,secondaryAxis=_ref.secondaryAxis,allSeries=_ref.series,_useChartContext=useChartContext(),getSeriesStatusStyle=_useChartContext.getSeriesStatusStyle,getDatumStatusStyle=_useChartContext.getDatumStatusStyle,focusedDatumState=_useChartContext.focusedDatumState,gridDimensions=_useChartContext.gridDimensions,curve=null!=(_secondaryAxis$curve=secondaryAxis.curve)?_secondaryAxis$curve:monotoneX,focusedDatum=focusedDatumState[0];return react.createElement("g",{style:{transform:translate(gridDimensions.left,gridDimensions.top)}},allSeries.map((function(series,i){var _lineFn,_secondaryAxis$showDa,style=getSeriesStatusStyle(series,focusedDatum),areaPath=null;if("area"===secondaryAxis.elementType){var _x2=function _x2(datum){return Line_getPrimary(datum,primaryAxis)},_y1=function _y1(datum){return Line_clampPxToAxis(function Line_getSecondaryStart(datum,secondaryAxis){var _secondaryAxis$scale4,_secondaryAxis$scale3,_datum$stackData$2,_datum$stackData2;return secondaryAxis.stacked?null!=(_secondaryAxis$scale3=secondaryAxis.scale(null!=(_datum$stackData$2=null==(_datum$stackData2=datum.stackData)?void 0:_datum$stackData2[0])?_datum$stackData$2:NaN))?_secondaryAxis$scale3:NaN:null!=(_secondaryAxis$scale4=secondaryAxis.scale(0))?_secondaryAxis$scale4:NaN}(datum,secondaryAxis),secondaryAxis)},_y2=function _y2(datum){return Line_clampPxToAxis(Line_getSecondary(datum,secondaryAxis),secondaryAxis)},areaFn=function src_area(x0,y0,y1){var x1=null,defined=src_constant(!0),context=null,curve=linear,output=null;function area(data){var i,j,k,d,buffer,n=(data=array(data)).length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return line().defined(defined).curve(curve).context(context)}return x0="function"==typeof x0?x0:void 0===x0?point_x:src_constant(+x0),y0="function"==typeof y0?y0:src_constant(void 0===y0?0:+y0),y1="function"==typeof y1?y1:void 0===y1?point_y:src_constant(+y1),area.x=function(_){return arguments.length?(x0="function"==typeof _?_:src_constant(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:src_constant(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:src_constant(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:src_constant(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:src_constant(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:src_constant(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:src_constant(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area}(_x2,_y1,_y2).curve(curve);areaFn.defined((function(datum){return[_x2(datum),_y1(datum),_y2(datum)].every(isDefined)})),areaPath=areaFn(series.datums)}var _x=function _x(datum){return Line_getPrimary(datum,primaryAxis)},_y=function _y(datum){return Line_getSecondary(datum,secondaryAxis)},lineFn=line(_x,_y).curve(curve);lineFn.defined((function(datum){return[_x(datum),_y(datum)].every(isDefined)}));var linePath=("area"===secondaryAxis.elementType||"line"===secondaryAxis.elementType)&&null!=(_lineFn=lineFn(series.datums))?_lineFn:void 0,showDatumElements=null!=(_secondaryAxis$showDa=secondaryAxis.showDatumElements)?_secondaryAxis$showDa:"bubble"===secondaryAxis.elementType||"onFocus";return react.createElement("g",{key:"lines-"+i},areaPath?react.createElement("path",{d:areaPath,style:(0,esm_extends.Z)({strokeWidth:2,opacity:.5},style,style.area)}):null,linePath?react.createElement("path",{d:linePath,style:(0,esm_extends.Z)({strokeWidth:2},style,style.line,{fill:"none"})}):null,series.datums.map((function(datum,i){var _secondaryAxis$showDa2,dataStyle=getDatumStatusStyle(datum,focusedDatum),radius="onFocus"===showDatumElements?datum===focusedDatum?4:0:2,show="onFocus"===showDatumElements?datum===focusedDatum:null!=(_secondaryAxis$showDa2=secondaryAxis.showDatumElements)?_secondaryAxis$showDa2:"bubble"===secondaryAxis.elementType;return react.createElement("circle",{key:i,ref:function ref(el){datum.element=el},cx:getX(datum,primaryAxis,secondaryAxis)||0,cy:getY(datum,primaryAxis,secondaryAxis)||0,style:(0,esm_extends.Z)({r:radius,transition:"all .3s ease-out"},style,style.circle,dataStyle,dataStyle.circle,show?{}:{opacity:0})})})))})))}function getX(datum,primaryAxis,secondaryAxis){return primaryAxis.isVertical?Line_getSecondary(datum,secondaryAxis):Line_getPrimary(datum,primaryAxis)}function getY(datum,primaryAxis,secondaryAxis){return primaryAxis.isVertical?Line_getPrimary(datum,primaryAxis):Line_getSecondary(datum,secondaryAxis)}function Line_getPrimary(datum,primaryAxis){var _primaryAxis$scale,primary=null!=(_primaryAxis$scale=primaryAxis.scale(datum.primaryValue))?_primaryAxis$scale:NaN;return"band"===primaryAxis.axisFamily&&(primary+=primaryAxis.scale.bandwidth()/2),primary}function Line_getSecondary(datum,secondaryAxis){var _secondaryAxis$scale2,_secondaryAxis$scale,_datum$stackData$,_datum$stackData;return secondaryAxis.stacked?null!=(_secondaryAxis$scale=secondaryAxis.scale(null!=(_datum$stackData$=null==(_datum$stackData=datum.stackData)?void 0:_datum$stackData[1])?_datum$stackData$:NaN))?_secondaryAxis$scale:NaN:null!=(_secondaryAxis$scale2=secondaryAxis.scale(datum.secondaryValue))?_secondaryAxis$scale2:NaN}function Line_clampPxToAxis(px,axis){var range=axis.scale.range();return axis.isVertical&&range.reverse(),Math.max(range[0],Math.min(px,range[1]))}function extent(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]}function min(values,valueof){let min;if(void 0===valueof)for(const value of values)null!=value&&(min>value||void 0===min&&value>=value)&&(min=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value)}return min}function max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}function quickselect(array,k,left=0,right=array.length-1,compare=ascending){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);quickselect(array,k,Math.max(left,Math.floor(k-m*s/n+sd)),Math.min(right,Math.floor(k+(n-m)*s/n+sd)),compare)}const t=array[k];let i=left,j=right;for(swap(array,left,k),compare(array[right],t)>0&&swap(array,left,right);i<j;){for(swap(array,i,j),++i,--j;compare(array[i],t)<0;)++i;for(;compare(array[j],t)>0;)--j}0===compare(array[left],t)?swap(array,left,j):(++j,swap(array,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}return array}function swap(array,i,j){const t=array[i];array[i]=array[j],array[j]=t}function quantile(values,p,valueof){if(values=Float64Array.from(function*numbers(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}}(values,valueof)),n=values.length){if((p=+p)<=0||n<2)return min(values);if(p>=1)return max(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max(quickselect(values,i0).subarray(0,i0+1));return value0+(min(values.subarray(i0+1))-value0)*(i-i0)}}function src_range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}function none(series,order){if((n=series.length)>1)for(var j,s0,n,i=1,s1=series[order[0]],m=s1.length;i<n;++i)for(s0=s1,s1=series[order[i]],j=0;j<m;++j)s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1]}function order_none(series){for(var n=series.length,o=new Array(n);--n>=0;)o[n]=n;return o}function stackValue(d,key){return d[key]}function stackSeries(key){const series=[];return series.key=key,series}function bisector(f){let delta=f,compare=f;function left(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){const mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo}return 1===f.length&&(delta=(d,x)=>f(d)-x,compare=function ascendingComparator(f){return(d,x)=>ascending(f(d),x)}(f)),{left,center:function center(a,x,lo,hi){null==lo&&(lo=0),null==hi&&(hi=a.length);const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i},right:function right(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){const mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0){let r0=Math.round(start/step),r1=Math.round(stop/step);for(r0*step<start&&++r0,r1*step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)*step}else{step=-step;let r0=Math.round(start*step),r1=Math.round(stop*step);for(r0/step<start&&++r0,r1/step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)/step}return reverse&&ticks.reverse(),ticks}function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}const durationMinute=6e4,durationHour=60*durationMinute,durationDay=24*durationHour,durationWeek=7*durationDay,durationMonth=30*durationDay,durationYear=365*durationDay;var t0=new Date,t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0.setTime(+start),t1.setTime(+end),floori(t0),floori(t1),Math.floor(count(t0,t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond=newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond:null};const src_millisecond=millisecond;millisecond.range;var second=newInterval((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()}));const src_second=second;second.range;var minute=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+step*durationMinute)}),(function(start,end){return(end-start)/durationMinute}),(function(date){return date.getMinutes()}));const src_minute=minute;minute.range;var hour=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-date.getMinutes()*durationMinute)}),(function(date,step){date.setTime(+date+step*durationHour)}),(function(start,end){return(end-start)/durationHour}),(function(date){return date.getHours()}));const src_hour=hour;hour.range;var day=newInterval((date=>date.setHours(0,0,0,0)),((date,step)=>date.setDate(date.getDate()+step)),((start,end)=>(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationDay),(date=>date.getDate()-1));const src_day=day;day.range;function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),month=(sunday.range,monday.range,tuesday.range,wednesday.range,thursday.range,friday.range,saturday.range,newInterval((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()})));const src_month=month;month.range;var year=newInterval((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null};const src_year=year;year.range;var utcMinute=newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+step*durationMinute)}),(function(start,end){return(end-start)/durationMinute}),(function(date){return date.getUTCMinutes()}));const src_utcMinute=utcMinute;utcMinute.range;var utcHour=newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+step*durationHour)}),(function(start,end){return(end-start)/durationHour}),(function(date){return date.getUTCHours()}));const src_utcHour=utcHour;utcHour.range;var utcDay=newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/durationDay}),(function(date){return date.getUTCDate()-1}));const src_utcDay=utcDay;utcDay.range;function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/durationWeek}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcMonth=(utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range,newInterval((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()})));const src_utcMonth=utcMonth;utcMonth.range;var utcYear=newInterval((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null};const src_utcYear=utcYear;utcYear.range;function ticker(year,month,week,day,hour,minute){const tickIntervals=[[src_second,1,1e3],[src_second,5,5e3],[src_second,15,15e3],[src_second,30,3e4],[minute,1,durationMinute],[minute,5,5*durationMinute],[minute,15,15*durationMinute],[minute,30,30*durationMinute],[hour,1,durationHour],[hour,3,3*durationHour],[hour,6,6*durationHour],[hour,12,12*durationHour],[day,1,durationDay],[day,2,2*durationDay],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickInterval(start,stop,count){const target=Math.abs(stop-start)/count,i=bisector((([,,step])=>step)).right(tickIntervals,target);if(i===tickIntervals.length)return year.every(tickStep(start/durationYear,stop/durationYear,count));if(0===i)return src_millisecond.every(Math.max(tickStep(start,stop,count),1));const[t,step]=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];return t.every(step)}return[function ticks(start,stop,count){const reverse=stop<start;reverse&&([start,stop]=[stop,start]);const interval=count&&"function"==typeof count.range?count:tickInterval(start,stop,count),ticks=interval?interval.range(start,+stop+1):[];return reverse?ticks.reverse():ticks},tickInterval]}const[utcTicks,utcTickInterval]=ticker(src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute),[timeTicks,timeTickInterval]=ticker(src_year,src_month,sunday,src_day,src_hour,src_minute);function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y,m,d,H:0,M:0,S:0,L:0}}var locale,timeFormat,utcFormat,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){return new Map(names.map(((name,i)=>[name.toLowerCase(),i])))}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+src_day.count(src_year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return pad(sunday.count(src_year(d)-1,d),p,2)}function dISO(d){var day=d.getDay();return day>=4||0===day?thursday(d):thursday.ceil(d)}function formatWeekNumberISO(d,p){return d=dISO(d),pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(monday.count(src_year(d)-1,d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatYearISO(d,p){return pad((d=dISO(d)).getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatFullYearISO(d,p){var day=d.getDay();return pad((d=day>=4||0===day?thursday(d):thursday.ceil(d)).getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function UTCdISO(d){var day=d.getUTCDay();return day>=4||0===day?utcThursday(d):utcThursday.ceil(d)}function formatUTCWeekNumberISO(d,p){return d=UTCdISO(d),pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO(d,p){return pad((d=UTCdISO(d)).getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCFullYearISO(d,p){var day=d.getUTCDay();return pad((d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d)).getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}!function defaultLocale(definition){return locale=function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup.get(n[0].toLowerCase()),i+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(Z&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate(newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=localDate(newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate(newDate(d.y,0,1)).getUTCDay():localDate(newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}}}(definition),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisect=(ascendingBisect.left,bisector((function src_number(x){return null===x?NaN:+x})).center,bisectRight);function src_define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function color_rgb(r,g,b,opacity){return 1===arguments.length?function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}src_define(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,(function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}),extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));const d3_interpolate_src_constant=x=>()=>x;function color_linear(a,d){return function(t){return a+t*d}}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?color_linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}const rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}rgbSpline((function src_basis(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}})),rgbSpline((function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}));function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function d3_interpolate_src_number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function string(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:d3_interpolate_src_number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function src_numberArray(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function value(a,b){var c,t=typeof b;return null==b||"boolean"===t?d3_interpolate_src_constant(b):("number"===t?d3_interpolate_src_number:"string"===t?(c=color(b))?(b=c,rgb):string:b instanceof color?rgb:b instanceof Date?date:function numberArray_isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}(b)?src_numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:d3_interpolate_src_number)(a,b)}function round(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}function number_number(x){return+x}var unit=[0,1];function continuous_identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:function constants(x){return function(){return x}}(isNaN(b)?NaN:.5)}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=value,clamp=continuous_identity;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==continuous_identity&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return null==x||isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),d3_interpolate_src_number)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,number_number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=round,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||continuous_identity,rescale()):clamp!==continuous_identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return transformer()(continuous_identity,continuous_identity)}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function nice(domain,interval){var t,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain}function time_date(t){return new Date(t)}function time_number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(ticks,tickInterval,year,month,week,day,hour,minute,second,format){var scale=continuous(),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y");function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(Array.from(_,time_number)):domain().map(time_date)},scale.ticks=function(interval){var d=domain();return ticks(d[0],d[d.length-1],null==interval?10:interval)},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval){var d=domain();return interval&&"function"==typeof interval.range||(interval=tickInterval(d[0],d[d.length-1],null==interval?10:interval)),interval?domain(nice(d,interval)):scale},scale.copy=function(){return copy(scale,calendar(ticks,tickInterval,year,month,week,day,hour,minute,second,format))},scale}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,src_year,src_month,sunday,src_day,src_hour,src_minute,src_second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute,src_second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const formatTypes={"%":(x,p)=>(100*x).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(100*x,p),r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)};function d3_format_src_identity(x){return x}var defaultLocale_locale,format,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function src_locale(locale){var group=void 0===locale.grouping||void 0===locale.thousands?d3_format_src_identity:function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?d3_format_src_identity:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function reflect(f){return function(x){return-f(-x)}}function loggish(transform){var logs,pows,scale=transform(transformLog,transformExp),domain=scale.domain,base=10;function rescale(){return logs=function logp(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}(base),pows=function powp(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}(base),domain()[0]<0?(logs=reflect(logs),pows=reflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){if(i=Math.floor(i),j=Math.ceil(j),u>0){for(;i<=j;++i)for(k=1,p=pows(i);k<base;++k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else for(;i<=j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}2*z.length<n&&(z=ticks(u,v,n))}else z=ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=function(count,specifier){if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=format(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=function(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))},scale}function log(){var scale=loggish(transformer()).domain([1,10]);return scale.copy=function(){return copy(scale,log()).base(scale.base())},initRange.apply(scale,arguments),scale}function tickFormat(start,stop,count,specifier){var precision,step=tickStep(start,stop,count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))}(step,value))||(specifier.precision=precision),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent(max)-exponent(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format(specifier)}function linear_linear(){var scale=continuous();return scale.copy=function(){return copy(scale,linear_linear())},initRange.apply(scale,arguments),function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var prestep,step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],maxIter=10;for(stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step);maxIter-- >0;){if((step=tickIncrement(start,stop,count))===prestep)return d[i0]=start,d[i1]=stop,domain(d);if(step>0)start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step;else{if(!(step<0))break;start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step}prestep=step}return scale},scale}(scale)}!function defaultLocale_defaultLocale(definition){return defaultLocale_locale=src_locale(definition),format=defaultLocale_locale.format,formatPrefix=defaultLocale_locale.formatPrefix,defaultLocale_locale}({thousands:",",grouping:[3],currency:["$",""]});const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}function band(){var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,r0=0,r1=1,round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n=domain().length,reverse=r1<r0,start=reverse?r1:r0,stop=reverse?r0:r1;step=(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));var values=src_range(n).map((function(i){return start+step*i}));return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?([r0,r1]=_,r0=+r0,r1=+r1,rescale()):[r0,r1]},scale.rangeRound=function(_){return[r0,r1]=_,r0=+r0,r1=+r1,round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingInner=Math.min(1,paddingOuter=+_),rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.min(1,_),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=+_,rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.copy=function(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},initRange.apply(rescale(),arguments)}function locale_localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function locale_utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function locale_newDate(y,m,d){return{y,m,d,H:0,M:0,S:0,L:0}}var src_defaultLocale_locale,defaultLocale_timeFormat,defaultLocale_utcFormat,locale_pads={"-":"",_:" ",0:"0"},locale_numberRe=/^\s*\d+/,locale_percentRe=/^%/,locale_requoteRe=/[\\^$*+?|[\]().{}]/g;function locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function locale_requote(s){return s.replace(locale_requoteRe,"\\$&")}function locale_formatRe(names){return new RegExp("^(?:"+names.map(locale_requote).join("|")+")","i")}function locale_formatLookup(names){return new Map(names.map(((name,i)=>[name.toLowerCase(),i])))}function locale_parseWeekdayNumberSunday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function locale_parseWeekdayNumberMonday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function locale_parseWeekNumberSunday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function locale_parseWeekNumberISO(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function locale_parseWeekNumberMonday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function locale_parseFullYear(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function locale_parseYear(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function locale_parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function locale_parseQuarter(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function locale_parseMonthNumber(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function locale_parseDayOfMonth(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function locale_parseDayOfYear(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function locale_parseHour24(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function locale_parseMinutes(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function locale_parseSeconds(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function locale_parseMilliseconds(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function locale_parseMicroseconds(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function locale_parseLiteralPercent(d,string,i){var n=locale_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function locale_parseUnixTimestamp(d,string,i){var n=locale_numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function locale_parseUnixTimestampSeconds(d,string,i){var n=locale_numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function locale_formatDayOfMonth(d,p){return locale_pad(d.getDate(),p,2)}function locale_formatHour24(d,p){return locale_pad(d.getHours(),p,2)}function locale_formatHour12(d,p){return locale_pad(d.getHours()%12||12,p,2)}function locale_formatDayOfYear(d,p){return locale_pad(1+src_day.count(src_year(d),d),p,3)}function locale_formatMilliseconds(d,p){return locale_pad(d.getMilliseconds(),p,3)}function locale_formatMicroseconds(d,p){return locale_formatMilliseconds(d,p)+"000"}function locale_formatMonthNumber(d,p){return locale_pad(d.getMonth()+1,p,2)}function locale_formatMinutes(d,p){return locale_pad(d.getMinutes(),p,2)}function locale_formatSeconds(d,p){return locale_pad(d.getSeconds(),p,2)}function locale_formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function locale_formatWeekNumberSunday(d,p){return locale_pad(sunday.count(src_year(d)-1,d),p,2)}function locale_dISO(d){var day=d.getDay();return day>=4||0===day?thursday(d):thursday.ceil(d)}function locale_formatWeekNumberISO(d,p){return d=locale_dISO(d),locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function locale_formatWeekdayNumberSunday(d){return d.getDay()}function locale_formatWeekNumberMonday(d,p){return locale_pad(monday.count(src_year(d)-1,d),p,2)}function locale_formatYear(d,p){return locale_pad(d.getFullYear()%100,p,2)}function locale_formatYearISO(d,p){return locale_pad((d=locale_dISO(d)).getFullYear()%100,p,2)}function locale_formatFullYear(d,p){return locale_pad(d.getFullYear()%1e4,p,4)}function locale_formatFullYearISO(d,p){var day=d.getDay();return locale_pad((d=day>=4||0===day?thursday(d):thursday.ceil(d)).getFullYear()%1e4,p,4)}function locale_formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+locale_pad(z/60|0,"0",2)+locale_pad(z%60,"0",2)}function locale_formatUTCDayOfMonth(d,p){return locale_pad(d.getUTCDate(),p,2)}function locale_formatUTCHour24(d,p){return locale_pad(d.getUTCHours(),p,2)}function locale_formatUTCHour12(d,p){return locale_pad(d.getUTCHours()%12||12,p,2)}function locale_formatUTCDayOfYear(d,p){return locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function locale_formatUTCMilliseconds(d,p){return locale_pad(d.getUTCMilliseconds(),p,3)}function locale_formatUTCMicroseconds(d,p){return locale_formatUTCMilliseconds(d,p)+"000"}function locale_formatUTCMonthNumber(d,p){return locale_pad(d.getUTCMonth()+1,p,2)}function locale_formatUTCMinutes(d,p){return locale_pad(d.getUTCMinutes(),p,2)}function locale_formatUTCSeconds(d,p){return locale_pad(d.getUTCSeconds(),p,2)}function locale_formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function locale_formatUTCWeekNumberSunday(d,p){return locale_pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function locale_UTCdISO(d){var day=d.getUTCDay();return day>=4||0===day?utcThursday(d):utcThursday.ceil(d)}function locale_formatUTCWeekNumberISO(d,p){return d=locale_UTCdISO(d),locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function locale_formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function locale_formatUTCWeekNumberMonday(d,p){return locale_pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function locale_formatUTCYear(d,p){return locale_pad(d.getUTCFullYear()%100,p,2)}function locale_formatUTCYearISO(d,p){return locale_pad((d=locale_UTCdISO(d)).getUTCFullYear()%100,p,2)}function locale_formatUTCFullYear(d,p){return locale_pad(d.getUTCFullYear()%1e4,p,4)}function locale_formatUTCFullYearISO(d,p){var day=d.getUTCDay();return locale_pad((d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d)).getUTCFullYear()%1e4,p,4)}function locale_formatUTCZone(){return"+0000"}function locale_formatLiteralPercent(){return"%"}function locale_formatUnixTimestamp(d){return+d}function locale_formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function buildAxisLinear(isPrimary,userOptions,series,allDatums,gridDimensions,width,height){var options=function defaultAxisOptions(options){var _options$elementType,_options$minTickPaddi,_options$tickLabelRot,_options$innerBandPad,_options$outerBandPad,_options$innerSeriesB,_options$outerSeriesB,_options$show,_options$stacked,_options$shouldNice;return(0,esm_extends.Z)({},options,{elementType:null!=(_options$elementType=options.elementType)?_options$elementType:"line",minTickPaddingForRotation:null!=(_options$minTickPaddi=options.minTickPaddingForRotation)?_options$minTickPaddi:10,tickLabelRotationDeg:null!=(_options$tickLabelRot=options.tickLabelRotationDeg)?_options$tickLabelRot:60,innerBandPadding:null!=(_options$innerBandPad=options.innerBandPadding)?_options$innerBandPad:.5,outerBandPadding:null!=(_options$outerBandPad=options.outerBandPadding)?_options$outerBandPad:.2,innerSeriesBandPadding:null!=(_options$innerSeriesB=options.innerSeriesBandPadding)?_options$innerSeriesB:.2,outerSeriesBandPadding:null!=(_options$outerSeriesB=options.outerSeriesBandPadding)?_options$outerSeriesB:0,show:null==(_options$show=options.show)||_options$show,stacked:null!=(_options$stacked=options.stacked)&&_options$stacked,shouldNice:null==(_options$shouldNice=options.shouldNice)||_options$shouldNice})}(userOptions);if(!options.position)throw new Error("Chart axes must have a valid 'position' property");var isVertical=["left","right"].indexOf(options.position)>-1,range=isVertical?[gridDimensions.height,0]:[0,gridDimensions.width],outerRange=isVertical?[height,0]:[0,width];return"time"===options.scaleType||"localTime"===options.scaleType?function buildTimeAxis(isPrimary,options,series,allDatums,isVertical,range,outerRange){var isLocal="localTime"===options.scaleType,scaleFn=isLocal?time:utcTime,isInvalid=!1;series=isPrimary?series:series.filter((function(s){return s.secondaryAxisId===options.id})),allDatums=isPrimary?allDatums:allDatums.filter((function(d){return d.secondaryAxisId===options.id}));var autoFormatStr,scale=scaleFn(range),_extent=extent(allDatums,(function(datum){var value=options.getValue(datum.originalDatum);return datum[isPrimary?"primaryValue":"secondaryValue"]=value,value})),minValue=_extent[0],maxValue=_extent[1],units=isLocal?{year:src_year,month:src_month,day:src_day,hour:src_hour,minute:src_minute,second:src_second}:{year:src_utcYear,month:src_utcMonth,day:src_utcDay,hour:src_utcHour,minute:src_utcMinute,second:src_second};minValue&&maxValue&&(units.year.count(minValue,maxValue)>0||units.year.floor(maxValue)<units.year()?autoFormatStr="%b %-d, %Y %-I:%M:%S.%L %p":units.month.count(minValue,maxValue)>0||units.month.floor(maxValue)<units.month()||units.day.count(minValue,maxValue)>0||units.day.floor(maxValue)<units.day()?autoFormatStr="%b %-d, %-I:%M:%S.%L %p":units.hour.count(minValue,maxValue)>0||units.hour.floor(maxValue)<units.hour()?autoFormatStr="%-I:%M:%S.%L %p":units.minute.count(minValue,maxValue)>0||units.minute.floor(maxValue)<units.minute()?autoFormatStr="%-I:%M:%S.%L":(units.second.count(minValue,maxValue)>0||units.second.floor(maxValue)<units.second())&&(autoFormatStr="%L"));var resolvedTimeFormat=isLocal?defaultLocale_timeFormat:defaultLocale_utcFormat,trimFormat=function trimFormat(str){return str.trim().replace(/(,$|^,)/,"")},contextFormat=function contextFormat(format,date){return units.second(date)<date?resolvedTimeFormat(format)(date):units.minute(date)<date?resolvedTimeFormat(trimFormat(format.replace(/\.%L.*?(\s|$)/,"")))(date):units.hour(date)<date?resolvedTimeFormat(trimFormat(format.replace(/:%S.*?(\s|$)/,"")))(date):units.day(date)<date?resolvedTimeFormat(trimFormat(format.replace(/:%M.*?(\s|$)/,"")))(date):units.month(date)<date?resolvedTimeFormat(trimFormat(format.replace(/%-I.*/,"")))(date):units.year(date)<date?resolvedTimeFormat(trimFormat(format.replace(/%-d.*/,"")))(date):resolvedTimeFormat("%Y")(date)},shouldNice=options.shouldNice;"[object Date]"===Object.prototype.toString.call(options.min)&&(minValue=min([options.min,minValue]),shouldNice=!1);"[object Date]"===Object.prototype.toString.call(options.max)&&(maxValue=max([options.max,maxValue]),shouldNice=!1);"[object Date]"===Object.prototype.toString.call(options.hardMin)&&(minValue=options.hardMin,shouldNice=!1);"[object Date]"===Object.prototype.toString.call(options.hardMax)&&(maxValue=options.hardMax,shouldNice=!1);void 0!==minValue&&void 0!==maxValue||(console.info("Invalid scale min/max",{options,series,range,values:allDatums.map((function(d){return isPrimary?d.primaryValue:d.secondaryValue}))}),isInvalid=!0);scale.domain([minValue,maxValue]),options.invert&&scale.domain(Array.from(scale.domain()).reverse());shouldNice&&scale.nice();var outerScale=scale.copy().range(outerRange),primaryBandScale=isPrimary?buildPrimaryBandScale(options,scale,series,range):void 0,seriesBandScale=primaryBandScale?buildSeriesBandScale(options,primaryBandScale,series):void 0,primaryBandWidth=null==primaryBandScale?void 0:primaryBandScale.bandwidth();if(options.padBandRange&&primaryBandWidth){var bandStart=scale.invert(0),diff=scale.invert(primaryBandWidth).valueOf()-bandStart.valueOf();scale.domain([new Date(scale.domain()[0].valueOf()-diff/2),new Date(scale.domain()[1].valueOf()+diff/2)])}var formatters={},defaultFormat=scale.tickFormat(),scaleFormat=function scaleFormat(value){var _options$formatters$s,_options$formatters;return null!=(_options$formatters$s=null==(_options$formatters=options.formatters)||null==_options$formatters.scale?void 0:_options$formatters.scale(value,(0,esm_extends.Z)({},formatters,{scale:void 0})))?_options$formatters$s:contextFormat(autoFormatStr,value)},tooltipFormat=function tooltipFormat(value){var _options$formatters$t,_options$formatters2;return null!=(_options$formatters$t=null==(_options$formatters2=options.formatters)||null==_options$formatters2.tooltip?void 0:_options$formatters2.tooltip(value,(0,esm_extends.Z)({},formatters,{tooltip:void 0})))?_options$formatters$t:scaleFormat(value)},cursorFormat=function cursorFormat(value){var _options$formatters$c,_options$formatters3;return null!=(_options$formatters$c=null==(_options$formatters3=options.formatters)||null==_options$formatters3.cursor?void 0:_options$formatters3.cursor(value,(0,esm_extends.Z)({},formatters,{cursor:void 0})))?_options$formatters$c:scaleFormat(value)};return Object.assign(formatters,{default:defaultFormat,scale:scaleFormat,tooltip:tooltipFormat,cursor:cursorFormat}),(0,esm_extends.Z)({},options,{isInvalid,axisFamily:"time",isVertical,scale,range,outerScale,primaryBandScale,seriesBandScale,formatters})}(isPrimary,options,series,allDatums,isVertical,range,outerRange):"linear"===options.scaleType||"log"===options.scaleType?function buildLinearAxis(isPrimary,options,series,allDatums,isVertical,range,outerRange){var scale="log"===options.scaleType?log():linear_linear(),isInvalid=!1;series=isPrimary?series:series.filter((function(s){return s.secondaryAxisId===options.id})),allDatums=isPrimary?allDatums:allDatums.filter((function(d){return d.secondaryAxisId===options.id})),options.stacked&&function buildAxis_linear_stackSeries(series,axisOptions){for(var _axisOptions$stackOff,seriesIndices=Object.keys(series),stacker=function stack(){var keys=src_constant([]),order=order_none,offset=none,value=stackValue;function stack(data){var i,oz,sz=Array.from(keys.apply(this,arguments),stackSeries),n=sz.length,j=-1;for(const d of data)for(i=0,++j;i<n;++i)(sz[i][j]=[0,+value(d,sz[i].key,j,data)]).data=d;for(i=0,oz=array(order(sz));i<n;++i)sz[oz[i]].index=i;return offset(sz,oz),sz}return stack.keys=function(_){return arguments.length?(keys="function"==typeof _?_:src_constant(Array.from(_)),stack):keys},stack.value=function(_){return arguments.length?(value="function"==typeof _?_:src_constant(+_),stack):value},stack.order=function(_){return arguments.length?(order=null==_?order_none:"function"==typeof _?_:src_constant(Array.from(_)),stack):order},stack.offset=function(_){return arguments.length?(offset=null==_?none:_,stack):offset},stack}().keys(seriesIndices).value((function(_,seriesIndex,index){var _series$Number,_series$Number$datums,originalDatum=null==(_series$Number=series[Number(seriesIndex)])||null==(_series$Number$datums=_series$Number.datums[index])?void 0:_series$Number$datums.originalDatum,val=void 0!==originalDatum?axisOptions.getValue(originalDatum):0;return null==val?0:val})).offset(null!=(_axisOptions$stackOff=axisOptions.stackOffset)?_axisOptions$stackOff:none),stacked=stacker(Array.from({length:series.sort((function(a,b){return b.datums.length-a.datums.length}))[0].datums.length})),sIndex=0;sIndex<stacked.length;sIndex++)for(var s=stacked[sIndex],i=0;i<s.length;i++){var datum=s[i];series[sIndex].datums[i]&&(datum.data=series[sIndex].datums[i],series[sIndex].datums[i].stackData=datum)}}(series,options);var _ref=options.stacked?extent(series.map((function(s){return s.datums.map((function(datum){var _datum$stackData,value=options.getValue(datum.originalDatum);return datum[isPrimary?"primaryValue":"secondaryValue"]=value,null!=(_datum$stackData=datum.stackData)?_datum$stackData:[]}))})).flat(2)):extent(allDatums,(function(datum){var value=options.getValue(datum.originalDatum);return datum[isPrimary?"primaryValue":"secondaryValue"]=value,value})),minValue=_ref[0],maxValue=_ref[1],shouldNice=options.shouldNice;"number"==typeof options.min&&(minValue=min([options.min,minValue]),shouldNice=!1);"number"==typeof options.max&&(maxValue=max([options.max,maxValue]),shouldNice=!1);if("number"==typeof options.minDomainLength&&void 0!==minValue&&void 0!==maxValue){var mid=function median(values,valueof){return quantile(values,.5,valueof)}([minValue,maxValue]),top=mid+options.minDomainLength/2,bottom=mid-options.minDomainLength/2;maxValue=Math.max(top,maxValue),minValue=Math.min(bottom,minValue)}"number"==typeof options.hardMin&&(minValue=options.hardMin,shouldNice=!1);"number"==typeof options.hardMax&&(maxValue=options.hardMax,shouldNice=!1);if(void 0===minValue||void 0===maxValue){var _minValue,_maxValue;isInvalid=!0,console.info("Invalid scale min/max",{options,series,range,values:allDatums.map((function(d){return isPrimary?d.primaryValue:d.secondaryValue}))}),minValue=null!=(_minValue=minValue)?_minValue:0,maxValue=null!=(_maxValue=maxValue)?_maxValue:0}scale.domain([minValue,maxValue]),options.invert&&scale.domain(Array.from(scale.domain()).reverse());scale.range(range),shouldNice&&scale.nice();var outerScale=scale.copy().range(outerRange),primaryBandScale=isPrimary?buildPrimaryBandScale(options,scale,series,range):void 0,seriesBandScale=primaryBandScale?buildSeriesBandScale(options,primaryBandScale,series):void 0,defaultFormat=scale.tickFormat(),formatters={},scaleFormat=function scaleFormat(value){var _options$formatters$s2,_options$formatters4;return null!=(_options$formatters$s2=null==(_options$formatters4=options.formatters)||null==_options$formatters4.scale?void 0:_options$formatters4.scale(value,(0,esm_extends.Z)({},formatters,{scale:void 0})))?_options$formatters$s2:defaultFormat(value)},tooltipFormat=function tooltipFormat(value){var _options$formatters$t2,_options$formatters5;return null!=(_options$formatters$t2=null==(_options$formatters5=options.formatters)||null==_options$formatters5.tooltip?void 0:_options$formatters5.tooltip(value,(0,esm_extends.Z)({},formatters,{tooltip:void 0})))?_options$formatters$t2:scaleFormat(value)},cursorFormat=function cursorFormat(value){var _options$formatters$c2,_options$formatters6;return null!=(_options$formatters$c2=null==(_options$formatters6=options.formatters)||null==_options$formatters6.cursor?void 0:_options$formatters6.cursor(value,(0,esm_extends.Z)({},formatters,{cursor:void 0})))?_options$formatters$c2:tooltipFormat(value)};return Object.assign(formatters,{default:defaultFormat,scale:scaleFormat,tooltip:tooltipFormat,cursor:cursorFormat}),(0,esm_extends.Z)({},options,{isInvalid,axisFamily:"linear",isVertical,scale,range,outerScale,primaryBandScale,seriesBandScale,formatters})}(isPrimary,options,series,allDatums,isVertical,range,outerRange):"band"===options.scaleType?function buildBandAxis(isPrimary,options,series,isVertical,range,outerRange){var _options$outerBandPad2,_options$innerBandPad2;series=series.filter((function(d){return d.secondaryAxisId===options.id}));var isInvalid=!1,domain=Array.from(new Set(series.map((function(d){return d.datums})).flat().map((function(datum){var value=options.getValue(datum.originalDatum);return datum[isPrimary?"primaryValue":"secondaryValue"]=value,value})))),scale=band(domain,range).round(!1).paddingOuter(null!=(_options$outerBandPad2=options.outerBandPadding)?_options$outerBandPad2:0).paddingInner(null!=(_options$innerBandPad2=options.innerBandPadding)?_options$innerBandPad2:0);options.invert&&scale.domain(Array.from(scale.domain()).reverse());var outerScale=scale.copy().range(outerRange),primaryBandScale=scale,seriesBandScale=buildSeriesBandScale(options,primaryBandScale,series),defaultFormat=function defaultFormat(d){return d},formatters={},scaleFormat=function scaleFormat(value){var _options$formatters$s3,_options$formatters7;return null!=(_options$formatters$s3=null==(_options$formatters7=options.formatters)||null==_options$formatters7.scale?void 0:_options$formatters7.scale(value,(0,esm_extends.Z)({},formatters,{scale:void 0})))?_options$formatters$s3:defaultFormat(value)},tooltipFormat=function tooltipFormat(value){var _options$formatters$t3,_options$formatters8;return null!=(_options$formatters$t3=null==(_options$formatters8=options.formatters)||null==_options$formatters8.tooltip?void 0:_options$formatters8.tooltip(value,(0,esm_extends.Z)({},formatters,{tooltip:void 0})))?_options$formatters$t3:scaleFormat(value)},cursorFormat=function cursorFormat(value){var _options$formatters$c3,_options$formatters9;return null!=(_options$formatters$c3=null==(_options$formatters9=options.formatters)||null==_options$formatters9.cursor?void 0:_options$formatters9.cursor(value,(0,esm_extends.Z)({},formatters,{cursor:void 0})))?_options$formatters$c3:tooltipFormat(value)};return Object.assign(formatters,{default:defaultFormat,scale:scaleFormat,tooltip:tooltipFormat,cursor:cursorFormat}),(0,esm_extends.Z)({},options,{isInvalid,axisFamily:"band",isVertical,scale,range,outerScale,formatters,primaryBandScale,seriesBandScale})}(isPrimary,options,series,isVertical,range,outerRange):function(){throw new Error("Invalid scale type")}()}function buildPrimaryBandScale(options,scale,series,range){for(var _options$outerBandPad3,_options$innerBandPad3,impliedBandWidth=Math.max.apply(Math,range),i=0;i<series.length;i++)for(var serie=series[i],j=0;j<serie.datums.length;j++)for(var _d1$primaryValue,one=scale(null!=(_d1$primaryValue=serie.datums[j].primaryValue)?_d1$primaryValue:NaN),k=0;k<serie.datums.length;k++){var _d2$primaryValue,two=scale(null!=(_d2$primaryValue=serie.datums[k].primaryValue)?_d2$primaryValue:NaN);if(one!==two){var diff=Math.abs(Math.max(one,two)-Math.min(one,two));diff<impliedBandWidth&&(impliedBandWidth=diff)}}return band(src_range(Math.max.apply(Math,range)/impliedBandWidth),range).round(!1).paddingOuter(null!=(_options$outerBandPad3=options.outerBandPadding)?_options$outerBandPad3:0).paddingInner(null!=(_options$innerBandPad3=options.innerBandPadding)?_options$innerBandPad3:0)}function buildSeriesBandScale(options,primaryBandScale,series){var _options$outerSeriesB2,_options$innerSeriesB2,seriesBandScale=band(src_range(series.length),[0,primaryBandScale.bandwidth()]).round(!1).paddingOuter(null!=(_options$outerSeriesB2=options.outerSeriesBandPadding)?_options$outerSeriesB2:options.outerBandPadding?options.outerBandPadding/2:0).paddingInner(null!=(_options$innerSeriesB2=options.innerSeriesBandPadding)?_options$innerSeriesB2:options.innerBandPadding?options.innerBandPadding/2:0);return Object.assign((function scale(seriesIndex){var _series$find;return seriesBandScale(null==(_series$find=series.find((function(d){return d.index===seriesIndex})))?void 0:_series$find.indexPerAxis)}),seriesBandScale)}!function src_defaultLocale_defaultLocale(definition){return src_defaultLocale_locale=function locale_formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=locale_formatRe(locale_periods),periodLookup=locale_formatLookup(locale_periods),weekdayRe=locale_formatRe(locale_weekdays),weekdayLookup=locale_formatLookup(locale_weekdays),shortWeekdayRe=locale_formatRe(locale_shortWeekdays),shortWeekdayLookup=locale_formatLookup(locale_shortWeekdays),monthRe=locale_formatRe(locale_months),monthLookup=locale_formatLookup(locale_months),shortMonthRe=locale_formatRe(locale_shortMonths),shortMonthLookup=locale_formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:locale_formatDayOfMonth,e:locale_formatDayOfMonth,f:locale_formatMicroseconds,g:locale_formatYearISO,G:locale_formatFullYearISO,H:locale_formatHour24,I:locale_formatHour12,j:locale_formatDayOfYear,L:locale_formatMilliseconds,m:locale_formatMonthNumber,M:locale_formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:locale_formatUnixTimestamp,s:locale_formatUnixTimestampSeconds,S:locale_formatSeconds,u:locale_formatWeekdayNumberMonday,U:locale_formatWeekNumberSunday,V:locale_formatWeekNumberISO,w:locale_formatWeekdayNumberSunday,W:locale_formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:locale_formatFullYear,Z:locale_formatZone,"%":locale_formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:locale_formatUTCDayOfMonth,e:locale_formatUTCDayOfMonth,f:locale_formatUTCMicroseconds,g:locale_formatUTCYearISO,G:locale_formatUTCFullYearISO,H:locale_formatUTCHour24,I:locale_formatUTCHour12,j:locale_formatUTCDayOfYear,L:locale_formatUTCMilliseconds,m:locale_formatUTCMonthNumber,M:locale_formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:locale_formatUnixTimestamp,s:locale_formatUnixTimestampSeconds,S:locale_formatUTCSeconds,u:locale_formatUTCWeekdayNumberMonday,U:locale_formatUTCWeekNumberSunday,V:locale_formatUTCWeekNumberISO,w:locale_formatUTCWeekdayNumberSunday,W:locale_formatUTCWeekNumberMonday,x:null,X:null,y:locale_formatUTCYear,Y:locale_formatUTCFullYear,Z:locale_formatUTCZone,"%":locale_formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:locale_parseDayOfMonth,e:locale_parseDayOfMonth,f:locale_parseMicroseconds,g:locale_parseYear,G:locale_parseFullYear,H:locale_parseHour24,I:locale_parseHour24,j:locale_parseDayOfYear,L:locale_parseMilliseconds,m:locale_parseMonthNumber,M:locale_parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup.get(n[0].toLowerCase()),i+n[0].length):-1},q:locale_parseQuarter,Q:locale_parseUnixTimestamp,s:locale_parseUnixTimestampSeconds,S:locale_parseSeconds,u:locale_parseWeekdayNumberMonday,U:locale_parseWeekNumberSunday,V:locale_parseWeekNumberISO,w:locale_parseWeekdayNumberSunday,W:locale_parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:locale_parseYear,Y:locale_parseFullYear,Z:locale_parseZone,"%":locale_parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=locale_pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=locale_newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(Z&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=locale_utcDate(locale_newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=locale_localDate(locale_newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?locale_utcDate(locale_newDate(d.y,0,1)).getUTCDay():locale_localDate(locale_newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,locale_utcDate(d)):locale_localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in locale_pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}}}(definition),defaultLocale_timeFormat=src_defaultLocale_locale.format,src_defaultLocale_locale.parse,defaultLocale_utcFormat=src_defaultLocale_locale.utcFormat,src_defaultLocale_locale.utcParse,src_defaultLocale_locale}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var getElBox=function getElBox(el){var rect=el.getBoundingClientRect();return{top:Math.round(rect.top),right:Math.round(rect.right),bottom:Math.round(rect.bottom),left:Math.round(rect.left),width:Math.round(rect.width),height:Math.round(rect.height),x:Math.round(rect.x),y:Math.round(rect.y)}};function AxisLinearComp(axis){var _React$useState=react.useState(!1),showRotated=_React$useState[0],setShowRotated=_React$useState[1],_useChartContext=useChartContext(),getOptions=_useChartContext.getOptions,gridDimensions=_useChartContext.gridDimensions,width=_useChartContext.width,height=_useChartContext.height,_getOptions=getOptions(),dark=_getOptions.dark,showDebugAxes=_getOptions.showDebugAxes,elRef=react.useRef(null);!function useMeasure(_ref){var axis=_ref.axis,elRef=_ref.elRef,gridDimensions=_ref.gridDimensions,setShowRotated=_ref.setShowRotated,axisDimensionsState=useChartContext().axisDimensionsState,axisDimensions=axisDimensionsState[0],setAxisDimensions=axisDimensionsState[1],axisDimension=react.useMemo((function(){var _axisDimensions;return null==(_axisDimensions=axisDimensions[axis.position])?void 0:_axisDimensions[axis.id]}),[axisDimensions,axis.position,axis.id]),measureRotation=react.useCallback((function(){var _widestLabel2;if(elRef.current){var widestLabel,gridSize=axis.isVertical?gridDimensions.height:gridDimensions.width,staticLabelDims=Array.from(elRef.current.querySelectorAll(".Axis-Group.outer .tickLabel")).map((function(el){return getElBox(el)}));staticLabelDims.forEach((function(label){var _widestLabel,resolvedLabel=null!=(_widestLabel=widestLabel)?_widestLabel:{width:0};label.width>0&&label.width>resolvedLabel.width&&(widestLabel=label)}));var smallestTickGap=gridSize;staticLabelDims.length>1&&staticLabelDims.forEach((function(current,i){var prev=staticLabelDims[i-1];prev&&(smallestTickGap=Math.min(smallestTickGap,axis.isVertical?current.top-prev.top:current.left-prev.left))}));var shouldRotate=((null==(_widestLabel2=widestLabel)?void 0:_widestLabel2.width)||0)+axis.minTickPaddingForRotation>smallestTickGap;axis.isVertical||setShowRotated(shouldRotate)}}),[elRef,axis.isVertical,axis.minTickPaddingForRotation,gridDimensions.width,gridDimensions.height,setShowRotated]),measureDimensions=react.useCallback((function(){if(elRef.current){var newDimensions={width:0,height:0,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},currentEl=elRef.current,axisEl=currentEl.querySelector(".Axis-Group.inner .domainAndTicks"),domainEl=currentEl.querySelector(".Axis-Group.inner .domain");if(axisEl&&domainEl){var axisDims=getElBox(axisEl),domainDims=getElBox(domainEl);axisDims&&domainDims&&(axis.isVertical?(newDimensions.paddingTop=Math.round(Math.max(0,domainDims.top-(null==axisDims?void 0:axisDims.top))),newDimensions.paddingBottom=Math.round(Math.max(0,(null==axisDims?void 0:axisDims.bottom)-domainDims.bottom)),newDimensions.width=null==axisDims?void 0:axisDims.width):(newDimensions.paddingLeft=Math.round(Math.max(0,domainDims.left-(null==axisDims?void 0:axisDims.left))),newDimensions.paddingRight=Math.round(Math.max(0,(null==axisDims?void 0:axisDims.right)-domainDims.right)),newDimensions.height=null==axisDims?void 0:axisDims.height),axisDimensions&&axisDimension&&!Object.keys(newDimensions).some((function(key){return newDimensions[key]!==axisDimension[key]}))||setAxisDimensions((function(old){var _old$axis$position2,_extends3,_extends4;return(0,esm_extends.Z)({},old,((_extends4={})[axis.position]=(0,esm_extends.Z)({},null!=(_old$axis$position2=old[axis.position])?_old$axis$position2:{},((_extends3={})[axis.id]=newDimensions,_extends3)),_extends4))})))}}else axisDimension&&setAxisDimensions((function(old){var _old$axis$position,_extends2,newAxes=(0,esm_extends.Z)({},null!=(_old$axis$position=old[axis.position])?_old$axis$position:{});return delete newAxes[axis.id],(0,esm_extends.Z)({},old,((_extends2={})[axis.position]=newAxes,_extends2))}))}),[axis.id,axis.isVertical,axis.position,axisDimension,axisDimensions,elRef,setAxisDimensions]);useIsomorphicLayoutEffect((function(){window.requestAnimationFrame((function(){measureRotation(),measureDimensions()}))}),[measureRotation])}({axis,elRef,gridDimensions,showRotated,setShowRotated});var renderAxis=function renderAxis(isOuter){var isRotated=!isOuter&&showRotated,scale=isOuter?axis.outerScale:axis.scale,_scale$range=scale.range(),rangeStart=_scale$range[0],rangeEnd=_scale$range[1],resolvedHeight=isOuter?height:gridDimensions.height,resolvedWidth=isOuter?width:gridDimensions.width,_ref="left"===axis.position?[{x:0,y:rangeStart},{x:0,y:rangeEnd}]:"right"===axis.position?[{x:resolvedWidth,y:rangeStart},{x:resolvedWidth,y:rangeEnd}]:"top"===axis.position?[{x:rangeStart,y:0},{x:rangeEnd,y:0}]:[{x:rangeStart,y:resolvedHeight},{x:rangeEnd,y:resolvedHeight}],lineFrom=_ref[0],lineTo=_ref[1],ticks=function getTicks(){var anyAxis=axis;if(anyAxis.outerScale.ticks){if("number"==typeof anyAxis.tickCount)return anyAxis.outerScale.ticks(anyAxis.tickCount);var autoSpacing=anyAxis.isVertical?40:80,range=anyAxis.outerScale.range(),num=Math.abs(range[1]-range[0])/autoSpacing;return anyAxis.outerScale.ticks(num)}return anyAxis.outerScale.domain()}().map((function(tick){var px=function getTickPx(scale,value){var _scale,px=null!=(_scale=scale(value))?_scale:NaN;if(scale.bandwidth)return px+scale.bandwidth()/2;return px}(scale,tick),_ref2="left"===axis.position?[{x:0,y:px},{x:-8,y:px},{x:resolvedWidth,y:px}]:"right"===axis.position?[{x:resolvedWidth,y:px},{x:resolvedWidth+8,y:px},{x:0,y:px}]:"top"===axis.position?[{x:px,y:0},{x:px,y:-8},{x:px,y:resolvedHeight}]:[{x:px,y:resolvedHeight},{x:px,y:resolvedHeight+8},{x:px,y:0}];return{value:tick,from:_ref2[0],to:_ref2[1],gridTo:_ref2[2]}}));return react.createElement("g",{key:"Axis-Group "+(isOuter?"outer":"inner"),className:"Axis-Group "+(isOuter?"outer":"inner"),style:{transform:isOuter?void 0:translate(gridDimensions.left,gridDimensions.top)}},react.createElement("g",{className:"Axis",style:(0,esm_extends.Z)({},isOuter?{opacity:showDebugAxes?.5:0,pointerEvents:"none"}:{opacity:1,pointerEvents:"all"})},react.createElement("g",{className:"domainAndTicks"},react.createElement("line",{className:"domain",x1:lineFrom.x,y1:lineFrom.y,x2:lineTo.x,y2:lineTo.y,stroke:dark?"rgba(255,255,255, .2)":"rgba(0,0,0, .2)"}),ticks.map((function(tick,i){var _tick$to=tick.to,tickLabelX=_tick$to.x,tickLabelY=_tick$to.y;return"top"===axis.position?tickLabelY-=5:"bottom"===axis.position?tickLabelY+=5:"left"===axis.position?tickLabelX-=5:"right"===axis.position&&(tickLabelX+=5),react.createElement("g",{key:"vx-tick-"+tick+"-"+i,className:"tick"},isOuter?null:react.createElement("line",{x1:tick.from.x,y1:tick.from.y,x2:tick.to.x,y2:tick.to.y,stroke:dark?"rgba(255,255,255, .2)":"rgba(0,0,0, .2)"}),react.createElement("text",{className:"tickLabel",style:{fontSize:10,fill:dark?"rgba(255,255,255, .7)":"rgba(0,0,0, .7)",dominantBaseline:isRotated?"central":"bottom"===axis.position?"hanging":"top"===axis.position?"alphabetic":"central",textAnchor:isRotated?"end":"right"===axis.position?"start":"left"===axis.position?"end":"middle"},transform:"translate("+tickLabelX+", "+tickLabelY+") rotate("+(isRotated?"top"===axis.position?60:-60:0)+")"},axis.formatters.scale(tick.value)))}))),react.createElement("g",{className:"grid"},ticks.map((function(tick,i){var _axis$showGrid;return react.createElement("g",{key:"vx-tick-"+tick+"-"+i,className:"tick"},null!=(_axis$showGrid=axis.showGrid)&&!_axis$showGrid||isOuter?null:react.createElement("line",{x1:tick.from.x,y1:tick.from.y,x2:tick.gridTo.x,y2:tick.gridTo.y,stroke:dark?"rgba(255,255,255, .05)":"rgba(0,0,0, .05)"}))})))))};return axis.show?react.createElement("g",{ref:elRef},renderAxis(!1),renderAxis(!0)):null}var react_dom=__webpack_require__("./node_modules/react-dom/index.js");function usePrevious(val){var ref=react.useRef();return useIsomorphicLayoutEffect((function(){ref.current=val}),[val]),ref.current}function useLatestWhen(obj,when){void 0===when&&(when=!0);var ref=react.useRef(when?obj:null);return when&&(ref.current=obj),ref.current}function usePortalElement(){var _React$useState=react.useState(),portalEl=_React$useState[0],setPortalEl=_React$useState[1];return useIsomorphicLayoutEffect((function(){if(!portalEl){var element=document.getElementById("react-charts-portal");element||((element=document.createElement("div")).setAttribute("id","react-charts-portal"),Object.assign(element.style,{pointerEvents:"none",position:"fixed",left:0,right:0,top:0,bottom:0,"z-index":99999999999}),document.body.append(element)),setPortalEl(element)}})),portalEl}function useRect(element,enabled){var rerender=react.useReducer((function(){return{}}),[])[1],rectRef=react.useRef({width:0,height:0,x:0,y:0,left:0,top:0,right:0,bottom:0}),measure=react.useCallback((function(){element&&(rectRef.current=element.getBoundingClientRect())}),[element]);return rectRef.current||measure(),react.useEffect((function(){if(element&&enabled){var cb=function cb(){measure(),rerender()};return document.addEventListener("scroll",cb,!0),function(){document.removeEventListener("scroll",cb,!0)}}}),[element,enabled,measure,rerender]),react.useEffect((function(){if(element&&enabled){measure(),rerender();var observer=new ResizeObserver((function(){measure(),rerender()}));return observer.observe(element),function(){observer.unobserve(element)}}}),[element,enabled,measure,rerender]),rectRef.current}var construct=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/construct.js"),spring_epsilon=.001;function almostEqual(a,b){return!(!Number.isNaN(a)||!Number.isNaN(b))||a>b-spring_epsilon&&a<b+spring_epsilon}function almostZero(a){return almostEqual(a,0)}var Spring=function(){function Spring(init,mass,springConstant,damping){this._m=mass,this._k=springConstant,this._c=damping,this._solution=null,this.endPosition=init,this._startTime=0}var _proto=Spring.prototype;return _proto.x=function x(dt){return void 0===dt&&(dt=((new Date).getTime()-this._startTime)/1e3),this._solution?this.endPosition+this._solution.x(dt):this.endPosition},_proto.dx=function dx(dt){return void 0===dt&&(dt=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(dt):0},_proto.setEnd=function setEnd(x){var t=(new Date).getTime(),velocity=0,position=this.endPosition;this._solution&&(almostZero(velocity)&&(velocity=this._solution.dx((t-this._startTime)/1e3)),position=this._solution.x((t-this._startTime)/1e3),almostZero(velocity)&&(velocity=0),almostZero(position)&&(position=0),position+=this.endPosition),this._solution&&almostZero(position-x)&&almostZero(velocity)||(this.endPosition=x,this._solution=this._solve(position-this.endPosition,velocity),this._startTime=t)},_proto.snap=function snap(x){this._startTime=(new Date).getTime(),this.endPosition=x,this._solution={x:function x(){return 0},dx:function dx(){return 0}}},_proto.done=function done(){return almostEqual(this.x(),this.endPosition)&&almostZero(this.dx())},_proto._solve=function _solve(initial,velocity){var c=this._c,m=this._m,k=this._k,cmk=c*c-4*m*k;if(0===cmk){var r=-c/(2*m),c1=initial,c2=velocity/(r*initial);return{x:function x(t){return(c1+c2*t)*Math.pow(Math.E,r*t)},dx:function dx(t){var pow=Math.pow(Math.E,r*t);return r*(c1+c2*t)*pow+c2*pow}}}if(cmk>0){var r1=(-c-Math.sqrt(cmk))/(2*m),r2=(-c+Math.sqrt(cmk))/(2*m),_c=(velocity-r1*initial)/(r2-r1),_c2=initial-_c;return{x:function x(t){return _c2*Math.pow(Math.E,r1*t)+_c*Math.pow(Math.E,r2*t)},dx:function dx(t){return _c2*r1*Math.pow(Math.E,r1*t)+_c*r2*Math.pow(Math.E,r2*t)}}}var w=Math.sqrt(4*m*k-c*c)/(2*m),_r=-c/2*m,_c3=initial,_c4=(velocity-_r*initial)/w;return{x:function x(t){return Math.pow(Math.E,_r*t)*(_c3*Math.cos(w*t)+_c4*Math.sin(w*t))},dx:function dx(t){var power=Math.pow(Math.E,_r*t),cos=Math.cos(w*t),sin=Math.sin(w*t);return power*(_c4*w*cos-_c3*w*sin)+_r*power*(_c4*sin+_c3*cos)}}},Spring}();function useSpring(value,config,cb,immediate,debug){var springRef=react.useRef((0,construct.Z)(Spring,[value].concat(config))),getValue=useGetLatest(value),_useRaf=function useRaf(callback){var raf=react.useRef(null),rafCallback=react.useRef(callback);rafCallback.current=callback;var tick=react.useCallback((function(){rafCallback.current()||(raf.current=requestAnimationFrame(tick))}),[]);return[react.useMemo((function(){return tick}),[tick]),react.useMemo((function(){return function(){return raf.current&&cancelAnimationFrame(raf.current)}}),[])]}((function(){return cb(springRef.current.x()),springRef.current.done()})),startRaf=_useRaf[0],stopRaf=_useRaf[1];return react.useEffect((function(){if(immediate)return springRef.current.snap(getValue()),void startRaf();springRef.current.setEnd(value),startRaf()}),[debug,getValue,immediate,startRaf,stopRaf,value]),react.useEffect((function(){return function(){stopRaf()}}),[stopRaf]),springRef.current}var getLineBackgroundColor=function getLineBackgroundColor(dark,bandWidth){return dark?"rgba(255,255,255,"+(bandWidth>4?.15:.3)+")":"rgba(0, 26, 39, "+(bandWidth>4?.15:.3)+")"},getBackgroundColor=function getBackgroundColor(dark){return dark?"rgba(255,255,255,.9)":"rgba(0, 26, 39, 0.9)"};function defaultCursor(options){var _options$show,_options$showLine,_options$showLabel;return(0,esm_extends.Z)({},options,{show:null==(_options$show=options.show)||_options$show,showLine:null==(_options$showLine=options.showLine)||_options$showLine,showLabel:null==(_options$showLabel=options.showLabel)||_options$showLabel})}function Cursors(){var _getOptions$primaryCu,_getOptions$secondary,getOptions=useChartContext().getOptions,primaryOptions=null==(_getOptions$primaryCu=getOptions().primaryCursor)||_getOptions$primaryCu,secondaryOptions=null==(_getOptions$secondary=getOptions().secondaryCursor)||_getOptions$secondary,resolvedPrimaryOptions=react.useMemo((function(){return defaultCursor(primaryOptions?"boolean"==typeof primaryOptions?{}:primaryOptions:{show:!1})}),[primaryOptions]),resolvedSecondaryOptions=react.useMemo((function(){return defaultCursor(secondaryOptions?"boolean"==typeof secondaryOptions?{}:secondaryOptions:{show:!1})}),[secondaryOptions]);return react.createElement(react.Fragment,null,resolvedPrimaryOptions.show&&react.createElement(Cursor,{primary:!0,options:resolvedPrimaryOptions}),resolvedSecondaryOptions.show&&react.createElement(Cursor,{options:resolvedSecondaryOptions}))}function Cursor(props){var _secondaryAxes$find,_props$options$value,_ref,_ref2,_ref3,_ref4,_getOptions$dark,_useChartContext2=useChartContext(),getOptions=_useChartContext2.getOptions,svgRef=_useChartContext2.svgRef,gridDimensions=_useChartContext2.gridDimensions,focusedDatumState=_useChartContext2.focusedDatumState,primaryAxis=_useChartContext2.primaryAxis,secondaryAxes=_useChartContext2.secondaryAxes,getTooltipOptions=useGetLatest(props.options),focusedDatum=focusedDatumState[0],latestFocusedDatum=useLatestWhen(focusedDatum,!!focusedDatum),secondaryAxis=null!=(_secondaryAxes$find=secondaryAxes.find((function(d){return d.id===(null==latestFocusedDatum?void 0:latestFocusedDatum.secondaryAxisId)})))?_secondaryAxes$find:secondaryAxes[0],axis=props.primary?primaryAxis:secondaryAxis,siblingAxis=props.primary?secondaryAxis:primaryAxis,resolveValue=function resolveValue(d){var _d$stackData;return d?axis.stacked?null==(_d$stackData=d.stackData)?void 0:_d$stackData[1]:props.primary?d.primaryValue:d.secondaryValue:void 0},datumValue=resolveValue(focusedDatum);react.useEffect((function(){var _getTooltipOptions;null==(_getTooltipOptions=getTooltipOptions())||null==_getTooltipOptions.onChange||_getTooltipOptions.onChange(datumValue)}),[getTooltipOptions,datumValue]);var x,y,x1,x2,y1,y2,alignPctX,alignPctY,_y,_y2,_x,_x2,value=null!=(_props$options$value=props.options.value)?_props$options$value:datumValue,latestPropsValue=useLatestWhen(props.options.value,null!=props.options.value),latestDatumValue=useLatestWhen(resolveValue(latestFocusedDatum),null!=resolveValue(latestFocusedDatum)),latestValue=null!=latestPropsValue?latestPropsValue:latestDatumValue,siblingRange=siblingAxis.scale.range(),bandWidth="band"===axis.axisFamily?axis.scale.bandwidth():1,show=void 0!==value&&!Number.isNaN(value),px=axis.scale(value);axis.isVertical?(y1=(null!=(_y=y=px)?_y:0)-1,y2=(null!=(_y2=y)?_y2:0)+bandWidth,"left"===axis.position?(x1=siblingRange[0],x2=siblingRange[1]):(x1=siblingRange[1],x2=siblingRange[0])):(x1=(null!=(_x=x=px)?_x:0)-1,x2=(null!=(_x2=x)?_x2:0)+bandWidth,"top"===axis.position?(y1=siblingRange[0],y2=siblingRange[1]):(y1=siblingRange[1],y2=siblingRange[0]));var bubbleX,bubbleY,lineStartX=Math.min(x1,x2),lineStartY=Math.min(y1,y2),lineEndX=Math.max(x1,x2),lineEndY=Math.max(y1,y2),lineHeight=Math.max(lineEndY-lineStartY,0),lineWidth=Math.max(lineEndX-lineStartX,0);axis.isVertical?(bubbleX="left"===axis.position?lineStartX:lineEndX,bubbleY=lineStartY+lineHeight/2):(bubbleY="top"===axis.position?lineStartY:lineEndY,bubbleX=lineStartX+lineWidth/2),axis.isVertical?(alignPctY=-50,alignPctX="left"===axis.position?-100:0):(alignPctX=-50,alignPctY="top"===axis.position?-100:0);var formattedValue=axis.formatters.cursor(latestValue),svgRect=useRect(svgRef.current,show),lineRef=react.useRef(null),bubbleRef=react.useRef(null),latestLineStartX=useLatestWhen(lineStartX,null!=px),latestLineStartY=useLatestWhen(lineStartY,null!=px),latestBubbleX=useLatestWhen(bubbleX,null!=px),latestBubbleY=useLatestWhen(bubbleY,null!=px),immediate=null==usePrevious(px)&&null!==px;lineStartY=null!=(_ref2=null!=px?lineStartY:latestLineStartY)?_ref2:NaN,bubbleX=null!=(_ref3=null!=px?bubbleX:latestBubbleX)?_ref3:NaN,bubbleY=null!=(_ref4=null!=px?bubbleY:latestBubbleY)?_ref4:NaN;var lineXSpring=useSpring(lineStartX=null!=(_ref=null!=px?lineStartX:latestLineStartX)?_ref:NaN,[1,210,20],(function(){lineRef.current&&(lineRef.current.style.transform="translate("+lineXSpring.x()+"px, "+lineYSpring.x()+"px)")}),immediate),lineYSpring=useSpring(lineStartY,[1,210,20],(function(){lineRef.current&&(lineRef.current.style.transform="translate("+lineXSpring.x()+"px, "+lineYSpring.x()+"px)")}),immediate),bubbleXSpring=useSpring(bubbleX,[1,210,20],(function(){bubbleRef.current&&(bubbleRef.current.style.transform="translate("+bubbleXSpring.x()+"px, "+bubbleYSpring.x()+"px)")}),immediate),bubbleYSpring=useSpring(bubbleY,[1,210,20],(function(){bubbleRef.current&&(bubbleRef.current.style.transform="translate("+bubbleXSpring.x()+"px, "+bubbleYSpring.x()+"px)")}),immediate),portalEl=usePortalElement();return portalEl?react_dom.createPortal(react.createElement("div",{style:{fontFamily:"sans-serif",pointerEvents:"none",position:"absolute",top:0,left:0,transform:translate(svgRect.left+gridDimensions.left,svgRect.top+gridDimensions.top),opacity:show?1:0,transition:"opacity .3s ease"},className:"Cursor"},props.options.showLine?react.createElement("div",{ref:lineRef,style:{width:lineWidth+"px",height:lineHeight+"px",position:"absolute",top:0,left:0,background:getLineBackgroundColor(null!=(_getOptions$dark=getOptions().dark)&&_getOptions$dark,bandWidth)}}):null,props.options.showLabel?react.createElement("div",{ref:bubbleRef,style:{position:"absolute",top:0,left:0}},react.createElement("div",{style:{padding:"5px",fontSize:"10px",background:getBackgroundColor(getOptions().dark),color:getBackgroundColor(!getOptions().dark),borderRadius:"3px",position:"relative",transform:"translate3d("+alignPctX+"%, "+alignPctY+"%, 0)",whiteSpace:"nowrap"}},formattedValue)):null),portalEl):null}var sideSchemas={left:{side:"left",startKey:"left",lengthKey:"width",crossStartKey:"top",crossLengthKey:"height",fromEnd:!1},right:{side:"right",startKey:"left",lengthKey:"width",crossStartKey:"top",crossLengthKey:"height",fromEnd:!0},top:{side:"top",startKey:"top",lengthKey:"height",crossStartKey:"left",crossLengthKey:"width",fromEnd:!1},bottom:{side:"bottom",startKey:"top",lengthKey:"height",crossStartKey:"left",crossLengthKey:"width",fromEnd:!0}};function useAnchor(options){var portalDims=useRect(options.portalEl,options.show),anchorDims=useRect(options.anchorEl,options.show),tooltipDims=useRect(options.tooltipEl,options.show),sides=react.useMemo((function(){return(Array.isArray(options.side)?options.side:[options.side]).map((function(alignStr){var _ref=alignStr.split(" "),side=_ref[0],_ref$=_ref[1],align=void 0===_ref$?"center":_ref$;if(!["top","right","bottom","left"].find((function(d){return side===d})))throw new Error('react-sticker: "'+side+"\" is not a valid side! Must be one of ['top', 'right', 'bottom', 'left'].");if(!["center","start","end","top","right","bottom","left"].find((function(d){return align===d})))throw new Error('react-sticker: "'+align+"\" is not a valid side-alignment! Must be one of ['center', 'start', 'end', 'top', 'right', 'bottom', 'left'].");return[side,align]}))}),[JSON.stringify(options.side)]),ready=portalDims&&tooltipDims&&anchorDims,fit=react.useMemo((function(){return ready&&options.show?function fitOnBestSide(_ref2){var portalDims=_ref2.portalDims,tooltipDims=_ref2.tooltipDims,anchorDims=_ref2.anchorDims,sides=_ref2.sides,useLargest=_ref2.useLargest,fits=sides.map((function(_ref3){var side=_ref3[0],align=_ref3[1];return function measureFit(_ref4){var _style,targetStart,fitRatio,crossTargetStart,side=_ref4.side,align=_ref4.align,startKey=_ref4.startKey,lengthKey=_ref4.lengthKey,crossStartKey=_ref4.crossStartKey,crossLengthKey=_ref4.crossLengthKey,fromEnd=_ref4.fromEnd,portalDims=_ref4.portalDims,tooltipDims=_ref4.tooltipDims,anchorDims=_ref4.anchorDims,parentStart=portalDims[startKey],parentLength=portalDims[lengthKey],crossParentStart=portalDims[crossStartKey],crossParentLength=portalDims[crossLengthKey],anchorStart=anchorDims[startKey]-portalDims[startKey],anchorLength=anchorDims[lengthKey],crossAnchorStart=anchorDims[crossStartKey],crossAnchorLength=anchorDims[crossLengthKey],crossAnchorWidth=anchorDims[crossLengthKey],targetLength=tooltipDims[lengthKey],crossTargetLength=tooltipDims[crossLengthKey];fromEnd?(targetStart=anchorStart+anchorLength,fitRatio=(parentLength-(anchorStart+anchorLength))/targetLength):(targetStart=anchorStart-targetLength,fitRatio=Math.min(anchorStart/targetLength));targetStart=Math.max(parentStart,Math.min(targetStart,parentLength)),"left"===startKey?"top"===align?align="start":"bottom"===align&&(align="end"):"left"===align?align="start":"right"===align&&(align="end");["start","center","end"].includes(align)||(align="center");crossTargetStart="start"===align?crossAnchorStart:"end"===align?crossAnchorStart+crossAnchorWidth-crossTargetLength:crossAnchorStart+crossAnchorLength/2-crossTargetLength/2;return crossTargetStart=Math.max(crossParentStart,Math.min(crossTargetStart,crossParentLength-crossTargetLength)),{side,align,startKey,lengthKey,crossStartKey,crossLengthKey,fromEnd,portalDims,tooltipDims,anchorDims,fitRatio,style:(_style={},_style[startKey]=targetStart,_style[crossStartKey]=crossTargetStart,_style)}}((0,esm_extends.Z)({},sideSchemas[side],{align,portalDims,tooltipDims,anchorDims}))}));if(useLargest)return fits.sort((function(a,b){return b.fitRatio-a.fitRatio})),fits[0];return fits.find((function(fit){return fit.fitRatio>=1}))||fits[0]}({portalDims,tooltipDims,anchorDims,sides,useLargest:options.useLargest}):null}),[anchorDims,options.show,options.useLargest,portalDims,ready,sides,tooltipDims]);return{fit,style:(0,esm_extends.Z)({position:"absolute",visibility:ready?"visible":"hidden"},null==fit?void 0:fit.style)}}var showCount=10,triangleSize=7,TooltipRenderer_getBackgroundColor=function getBackgroundColor(dark){return dark?"rgba(255,255,255,.9)":"rgba(0, 26, 39, 0.9)"};function tooltipRenderer(props){return react.createElement(TooltipRenderer,props)}function TooltipRenderer(props){var _props$focusedDatum$t,_props$focusedDatum,_focusedDatum$tooltip,latestFit=useLatestWhen(props.anchor.fit,!!props.anchor.fit);if(!props.focusedDatum)return null;var primaryAxis=props.primaryAxis,secondaryAxis=props.secondaryAxis,getDatumStyle=props.getDatumStyle,focusedDatum=props.focusedDatum,secondaryAxes=props.secondaryAxes,_props$getOptions=props.getOptions(),tooltip=_props$getOptions.tooltip,dark=_props$getOptions.dark,groupDatums=null!=(_props$focusedDatum$t=null==(_props$focusedDatum=props.focusedDatum)?void 0:_props$focusedDatum.tooltipGroup)?_props$focusedDatum$t:[],resolvedShowCount=showCount%2==0?showCount:showCount+1,length=groupDatums.length,activeIndex=groupDatums.findIndex((function(d){return d===focusedDatum})),start=activeIndex>-1?activeIndex-resolvedShowCount/2:0;start=Math.max(start,0);var end=activeIndex>-1?start+resolvedShowCount:length;end=Math.min(end,length),start=Math.max(end-resolvedShowCount,0);var arrowPosition,triangleStyles,visibleSortedGroupDatums=groupDatums.slice(start,end),hasPrevious=start>0,hasNext=end<length,finalAlign=(null==latestFit?void 0:latestFit.side)+"-"+(null==latestFit?void 0:latestFit.align);arrowPosition||("left-center"===finalAlign?arrowPosition="right":"right-center"===finalAlign?arrowPosition="left":"top-center"===finalAlign?arrowPosition="bottom":"bottom-center"===finalAlign?arrowPosition="top":"right-start"===finalAlign?arrowPosition="bottomLeft":"right-end"===finalAlign?arrowPosition="topLeft":"left-start"===finalAlign?arrowPosition="bottomRight":"left-end"===finalAlign&&(arrowPosition="topRight"));var backgroundColor=TooltipRenderer_getBackgroundColor(dark);return triangleStyles="bottom"===arrowPosition?{top:"100%",left:"50%",transform:"translate3d(-50%, 0%, 0)",borderLeft:.8*triangleSize+"px solid transparent",borderRight:.8*triangleSize+"px solid transparent",borderTop:triangleSize+"px solid "+backgroundColor}:"top"===arrowPosition?{top:"0%",left:"50%",transform:"translate3d(-50%, -100%, 0)",borderLeft:.8*triangleSize+"px solid transparent",borderRight:.8*triangleSize+"px solid transparent",borderBottom:triangleSize+"px solid "+backgroundColor}:"right"===arrowPosition?{top:"50%",left:"100%",transform:"translate3d(0%, -50%, 0)",borderTop:.8*triangleSize+"px solid transparent",borderBottom:.8*triangleSize+"px solid transparent",borderLeft:triangleSize+"px solid "+backgroundColor}:"left"===arrowPosition?{top:"50%",left:"0%",transform:"translate3d(-100%, -50%, 0)",borderTop:.8*triangleSize+"px solid transparent",borderBottom:.8*triangleSize+"px solid transparent",borderRight:triangleSize+"px solid "+backgroundColor}:"topRight"===arrowPosition?{top:"0%",left:"100%",transform:"translate3d(-50%, -50%, 0) rotate(-45deg)",borderTop:.8*triangleSize+"px solid transparent",borderBottom:.8*triangleSize+"px solid transparent",borderLeft:2*triangleSize+"px solid "+backgroundColor}:"bottomRight"===arrowPosition?{top:"100%",left:"100%",transform:"translate3d(-50%, -50%, 0) rotate(45deg)",borderTop:.8*triangleSize+"px solid transparent",borderBottom:.8*triangleSize+"px solid transparent",borderLeft:2*triangleSize+"px solid "+backgroundColor}:"topLeft"===arrowPosition?{top:"0%",left:"0%",transform:"translate3d(-50%, -50%, 0) rotate(45deg)",borderTop:.8*triangleSize+"px solid transparent",borderBottom:.8*triangleSize+"px solid transparent",borderRight:2*triangleSize+"px solid "+backgroundColor}:"bottomLeft"===arrowPosition?{top:"100%",left:"0%",transform:"translate3d(-50%, -50%, 0) rotate(-45deg)",borderTop:.8*triangleSize+"px solid transparent",borderBottom:.8*triangleSize+"px solid transparent",borderRight:2*triangleSize+"px solid "+backgroundColor}:{opacity:0},react.createElement("div",{style:{position:"relative",fontSize:"10px",padding:"5px",background:TooltipRenderer_getBackgroundColor(dark),color:dark?"black":"white",borderRadius:"3px"}},react.createElement("div",{style:(0,esm_extends.Z)({position:"absolute",width:0,height:0},triangleStyles)}),react.createElement("div",null,react.createElement("div",{style:{marginBottom:"3px",textAlign:"center"}},"series"===tooltip.groupingMode?react.createElement("strong",null,focusedDatum.seriesLabel):"secondary"===tooltip.groupingMode?react.createElement("strong",null,secondaryAxis.formatters.tooltip(focusedDatum.secondaryValue)):react.createElement("strong",null,primaryAxis.formatters.tooltip(focusedDatum.primaryValue))),react.createElement("table",{style:{whiteSpace:"nowrap"}},react.createElement("tbody",null,hasPrevious?react.createElement("tr",{style:{opacity:.8}},react.createElement("td",null),react.createElement("td",null,"..."),react.createElement("td",null)):null,visibleSortedGroupDatums.map((function(sortedDatum,i){var active=sortedDatum===focusedDatum,datumSecondaryAxis=secondaryAxes.find((function(d){return d.id===sortedDatum.secondaryAxisId}));return react.createElement("tr",{key:i,style:{opacity:active?1:.8,fontWeight:active?"bold":void 0}},react.createElement("td",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},react.createElement("svg",{width:"14",height:"14"},react.createElement("circle",{cx:"7",cy:"7",r:"5",style:(0,esm_extends.Z)({},getDatumStyle(sortedDatum),{stroke:dark?"black":"white",strokeWidth:active?2:1})}))),"series"===tooltip.groupingMode?react.createElement(react.Fragment,null,react.createElement("td",null,primaryAxis.formatters.tooltip(sortedDatum.primaryValue),": "),react.createElement("td",{style:{textAlign:"right"}},datumSecondaryAxis.formatters.tooltip(sortedDatum.secondaryValue))):"secondary"===tooltip.groupingMode?react.createElement(react.Fragment,null,react.createElement("td",null,sortedDatum.seriesLabel,": "),react.createElement("td",{style:{textAlign:"right"}},primaryAxis.formatters.tooltip(sortedDatum.primaryValue))):react.createElement(react.Fragment,null,react.createElement("td",null,sortedDatum.seriesLabel,": "),react.createElement("td",{style:{textAlign:"right"}},datumSecondaryAxis.formatters.tooltip(sortedDatum.secondaryValue))))})),hasNext?react.createElement("tr",{style:{opacity:.8}},react.createElement("td",null),react.createElement("td",null,"..."),react.createElement("td",null)):null,(null!=(_focusedDatum$tooltip=focusedDatum.tooltipGroup)?_focusedDatum$tooltip:[]).length>1?props.secondaryAxes.filter((function(d){return d.stacked})).map((function(secondaryAxis,i){var _secondaryAxis$id,_focusedDatum$tooltip2;return react.createElement("tr",{key:secondaryAxis.id+"_"+i},react.createElement("td",{style:{paddingTop:"5px"}},react.createElement("div",{style:{width:"12px",height:"12px",backgroundColor:dark?"rgba(0, 26, 39, 0.3)":"rgba(255,255,255,.2)",borderRadius:"50px"}})),react.createElement("td",{style:{paddingTop:"5px"}},props.secondaryAxes.length>1?null!=(_secondaryAxis$id=secondaryAxis.id)?_secondaryAxis$id:"Axis "+(i+1)+" ":"","Total: "),react.createElement("td",{style:{paddingTop:"5px"}},secondaryAxis.formatters.scale(sum(null!=(_focusedDatum$tooltip2=focusedDatum.tooltipGroup)?_focusedDatum$tooltip2:[],(function(d){return d.secondaryValue})))))})):null))))}var _excluded=["visibility"];function Tooltip(){var _secondaryAxes$find,_useLatestWhen,_useChartContext=useChartContext(),focusedDatumState=_useChartContext.focusedDatumState,getOptions=_useChartContext.getOptions,primaryAxis=_useChartContext.primaryAxis,secondaryAxes=_useChartContext.secondaryAxes,getDatumStatusStyle=_useChartContext.getDatumStatusStyle,svgRef=_useChartContext.svgRef,focusedDatum=focusedDatumState[0],latestFocusedDatum=useLatestWhen(focusedDatum,!!focusedDatum),secondaryAxis=null!=(_secondaryAxes$find=secondaryAxes.find((function(d){return d.id===(null==latestFocusedDatum?void 0:latestFocusedDatum.secondaryAxisId)})))?_secondaryAxes$find:secondaryAxes[0],portalEl=usePortalElement(),_React$useState=react.useState(),tooltipEl=_React$useState[0],setTooltipEl=_React$useState[1],svgRect=useRect(svgRef.current,!(null==focusedDatum||!focusedDatum.element)),anchorEl=react.useMemo((function(){var _latestFocusedDatum$e,_latestFocusedDatum$e2,_anchorRect$left,_anchorRect$top,_anchorRect$width,_anchorRect$height,anchorRect=null!=(_latestFocusedDatum$e=null==latestFocusedDatum||null==(_latestFocusedDatum$e2=latestFocusedDatum.element)?void 0:_latestFocusedDatum$e2.getBoundingClientRect())?_latestFocusedDatum$e:null;if(!anchorRect)return null;if(svgRect){var translateX=null!=(_anchorRect$left=anchorRect.left)?_anchorRect$left:0,translateY=null!=(_anchorRect$top=anchorRect.top)?_anchorRect$top:0,width=null!=(_anchorRect$width=anchorRect.width)?_anchorRect$width:0,height=null!=(_anchorRect$height=anchorRect.height)?_anchorRect$height:0,el=document.createElement("div");return el.getBoundingClientRect=function(){return{x:translateX,y:translateY,width,height,top:translateY,left:translateX,bottom:translateY+width,right:translateX+height}},el}}),[null==latestFocusedDatum?void 0:latestFocusedDatum.element,svgRect]),anchor=useAnchor({show:!!focusedDatum,portalEl,anchorEl,tooltipEl,side:["right","left","top","bottom"]}),previousAnchor=usePrevious(anchor),_latestStableAnchor$s=(null!=(_useLatestWhen=useLatestWhen(anchor,!!anchor.fit))?_useLatestWhen:anchor).style,anchorStyle=(_latestStableAnchor$s.visibility,(0,objectWithoutPropertiesLoose.Z)(_latestStableAnchor$s,_excluded)),tooltipRef=react.useRef(null),immediate=Number.isNaN(null==previousAnchor?void 0:previousAnchor.style.left),tooltipXSpring=useSpring(anchorStyle.left||0,[1,210,30],(function(){tooltipRef.current&&(tooltipRef.current.style.transform="translate("+tooltipXSpring.x()+"px, "+tooltipYSpring.x()+"px)")}),immediate),tooltipYSpring=useSpring(anchorStyle.top||0,[1,210,30],(function(){tooltipRef.current&&(tooltipRef.current.style.transform="translate("+tooltipXSpring.x()+"px, "+tooltipYSpring.x()+"px)")}),immediate),show=getOptions().tooltip.show,latestFit=useLatestWhen(anchor.fit,!!anchor.fit);return show&&portalEl?react_dom.createPortal(react.createElement("div",{ref:tooltipRef,style:{position:anchorStyle.position,opacity:focusedDatum?1:0,transition:"opacity .3s ease"}},react.createElement("div",{ref:function ref(el){return setTooltipEl(el)},style:(0,esm_extends.Z)({fontFamily:"sans-serif"},"left"===(null==latestFit?void 0:latestFit.startKey)?{padding:"0 10px"}:{padding:"10px 0"})},getOptions().tooltip.render({getOptions,focusedDatum:latestFocusedDatum,primaryAxis,secondaryAxes,secondaryAxis,getDatumStyle:function getDatumStyle(datum){return getDatumStatusStyle(datum,focusedDatum)},anchor}))),portalEl):null}const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(points,getX=defaultGetX,getY=defaultGetY){const n=points.length,coords=new Float64Array(2*n);for(let i=0;i<n;i++){const p=points[i];coords[2*i]=getX(p),coords[2*i+1]=getY(p)}return new Delaunator(coords)}constructor(coords){const n=coords.length>>1;if(n>0&&"number"!=typeof coords[0])throw new Error("Expected coords to contain numbers.");this.coords=coords;const maxTriangles=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*maxTriangles),this._halfedges=new Int32Array(3*maxTriangles),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords,_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}=this,n=coords.length>>1;let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i=0;i<n;i++){const x=coords[2*i],y=coords[2*i+1];x<minX&&(minX=x),y<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y),this._ids[i]=i}const cx=(minX+maxX)/2,cy=(minY+maxY)/2;let i0,i1,i2,minDist=1/0;for(let i=0;i<n;i++){const d=dist(cx,cy,coords[2*i],coords[2*i+1]);d<minDist&&(i0=i,minDist=d)}const i0x=coords[2*i0],i0y=coords[2*i0+1];minDist=1/0;for(let i=0;i<n;i++){if(i===i0)continue;const d=dist(i0x,i0y,coords[2*i],coords[2*i+1]);d<minDist&&d>0&&(i1=i,minDist=d)}let i1x=coords[2*i1],i1y=coords[2*i1+1],minRadius=1/0;for(let i=0;i<n;i++){if(i===i0||i===i1)continue;const r=circumradius(i0x,i0y,i1x,i1y,coords[2*i],coords[2*i+1]);r<minRadius&&(i2=i,minRadius=r)}let i2x=coords[2*i2],i2y=coords[2*i2+1];if(minRadius===1/0){for(let i=0;i<n;i++)this._dists[i]=coords[2*i]-coords[0]||coords[2*i+1]-coords[1];quicksort(this._ids,this._dists,0,n-1);const hull=new Uint32Array(n);let j=0;for(let i=0,d0=-1/0;i<n;i++){const id=this._ids[i];this._dists[id]>d0&&(hull[j++]=id,d0=this._dists[id])}return this.hull=hull.subarray(0,j),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(orient(i0x,i0y,i1x,i1y,i2x,i2y)){const i=i1,x=i1x,y=i1y;i1=i2,i1x=i2x,i1y=i2y,i2=i,i2x=x,i2y=y}const center=function circumcenter(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex);return{x:ax+(ey*bl-dy*cl)*d,y:ay+(dx*cl-ex*bl)*d}}(i0x,i0y,i1x,i1y,i2x,i2y);this._cx=center.x,this._cy=center.y;for(let i=0;i<n;i++)this._dists[i]=dist(coords[2*i],coords[2*i+1],center.x,center.y);quicksort(this._ids,this._dists,0,n-1),this._hullStart=i0;let hullSize=3;hullNext[i0]=hullPrev[i2]=i1,hullNext[i1]=hullPrev[i0]=i2,hullNext[i2]=hullPrev[i1]=i0,hullTri[i0]=0,hullTri[i1]=1,hullTri[i2]=2,hullHash.fill(-1),hullHash[this._hashKey(i0x,i0y)]=i0,hullHash[this._hashKey(i1x,i1y)]=i1,hullHash[this._hashKey(i2x,i2y)]=i2,this.trianglesLen=0,this._addTriangle(i0,i1,i2,-1,-1,-1);for(let xp,yp,k=0;k<this._ids.length;k++){const i=this._ids[k],x=coords[2*i],y=coords[2*i+1];if(k>0&&Math.abs(x-xp)<=EPSILON&&Math.abs(y-yp)<=EPSILON)continue;if(xp=x,yp=y,i===i0||i===i1||i===i2)continue;let start=0;for(let j=0,key=this._hashKey(x,y);j<this._hashSize&&(start=hullHash[(key+j)%this._hashSize],-1===start||start===hullNext[start]);j++);start=hullPrev[start];let q,e=start;for(;q=hullNext[e],!orient(x,y,coords[2*e],coords[2*e+1],coords[2*q],coords[2*q+1]);)if(e=q,e===start){e=-1;break}if(-1===e)continue;let t=this._addTriangle(e,i,hullNext[e],-1,-1,hullTri[e]);hullTri[i]=this._legalize(t+2),hullTri[e]=t,hullSize++;let n=hullNext[e];for(;q=hullNext[n],orient(x,y,coords[2*n],coords[2*n+1],coords[2*q],coords[2*q+1]);)t=this._addTriangle(n,i,q,hullTri[i],-1,hullTri[n]),hullTri[i]=this._legalize(t+2),hullNext[n]=n,hullSize--,n=q;if(e===start)for(;q=hullPrev[e],orient(x,y,coords[2*q],coords[2*q+1],coords[2*e],coords[2*e+1]);)t=this._addTriangle(q,i,e,-1,hullTri[e],hullTri[q]),this._legalize(t+2),hullTri[q]=t,hullNext[e]=e,hullSize--,e=q;this._hullStart=hullPrev[i]=e,hullNext[e]=hullPrev[n]=i,hullNext[i]=n,hullHash[this._hashKey(x,y)]=i,hullHash[this._hashKey(coords[2*e],coords[2*e+1])]=e}this.hull=new Uint32Array(hullSize);for(let i=0,e=this._hullStart;i<hullSize;i++)this.hull[i]=e,e=hullNext[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(x,y){return Math.floor(function pseudoAngle(dx,dy){const p=dx/(Math.abs(dx)+Math.abs(dy));return(dy>0?3-p:1+p)/4}(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:triangles,_halfedges:halfedges,coords}=this;let i=0,ar=0;for(;;){const b=halfedges[a],a0=a-a%3;if(ar=a0+(a+2)%3,-1===b){if(0===i)break;a=EDGE_STACK[--i];continue}const b0=b-b%3,al=a0+(a+1)%3,bl=b0+(b+2)%3,p0=triangles[ar],pr=triangles[a],pl=triangles[al],p1=triangles[bl];if(inCircle(coords[2*p0],coords[2*p0+1],coords[2*pr],coords[2*pr+1],coords[2*pl],coords[2*pl+1],coords[2*p1],coords[2*p1+1])){triangles[a]=p1,triangles[b]=p0;const hbl=halfedges[bl];if(-1===hbl){let e=this._hullStart;do{if(this._hullTri[e]===bl){this._hullTri[e]=a;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(a,hbl),this._link(b,halfedges[ar]),this._link(ar,bl);const br=b0+(b+1)%3;i<EDGE_STACK.length&&(EDGE_STACK[i++]=br)}else{if(0===i)break;a=EDGE_STACK[--i]}}return ar}_link(a,b){this._halfedges[a]=b,-1!==b&&(this._halfedges[b]=a)}_addTriangle(i0,i1,i2,a,b,c){const t=this.trianglesLen;return this._triangles[t]=i0,this._triangles[t+1]=i1,this._triangles[t+2]=i2,this._link(t,a),this._link(t+1,b),this._link(t+2,c),this.trianglesLen+=3,t}}function dist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}function orientIfSure(px,py,rx,ry,qx,qy){const l=(ry-py)*(qx-px),r=(rx-px)*(qy-py);return Math.abs(l-r)>=33306690738754716e-32*Math.abs(l+r)?l-r:0}function orient(rx,ry,qx,qy,px,py){return(orientIfSure(px,py,rx,ry,qx,qy)||orientIfSure(rx,ry,qx,qy,px,py)||orientIfSure(qx,qy,px,py,rx,ry))<0}function inCircle(ax,ay,bx,by,cx,cy,px,py){const dx=ax-px,dy=ay-py,ex=bx-px,ey=by-py,fx=cx-px,fy=cy-py,bp=ex*ex+ey*ey,cp=fx*fx+fy*fy;return dx*(ey*cp-bp*fy)-dy*(ex*cp-bp*fx)+(dx*dx+dy*dy)*(ex*fy-ey*fx)<0}function circumradius(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex),x=(ey*bl-dy*cl)*d,y=(dx*cl-ex*bl)*d;return x*x+y*y}function quicksort(ids,dists,left,right){if(right-left<=20)for(let i=left+1;i<=right;i++){const temp=ids[i],tempDist=dists[temp];let j=i-1;for(;j>=left&&dists[ids[j]]>tempDist;)ids[j+1]=ids[j--];ids[j+1]=temp}else{let i=left+1,j=right;delaunator_swap(ids,left+right>>1,i),dists[ids[left]]>dists[ids[right]]&&delaunator_swap(ids,left,right),dists[ids[i]]>dists[ids[right]]&&delaunator_swap(ids,i,right),dists[ids[left]]>dists[ids[i]]&&delaunator_swap(ids,left,i);const temp=ids[i],tempDist=dists[temp];for(;;){do{i++}while(dists[ids[i]]<tempDist);do{j--}while(dists[ids[j]]>tempDist);if(j<i)break;delaunator_swap(ids,i,j)}ids[left+1]=ids[j],ids[j]=temp,right-i+1>=j-left?(quicksort(ids,dists,i,right),quicksort(ids,dists,left,j-1)):(quicksort(ids,dists,left,j-1),quicksort(ids,dists,i,right))}}function delaunator_swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}class path_Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(x,y){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(x,y){this._+=`L${this._x1=+x},${this._y1=+y}`}arc(x,y,r){const x0=(x=+x)+(r=+r),y0=y=+y;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${x0},${y0}`:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(this._+=`A${r},${r},0,1,1,${x-r},${y}A${r},${r},0,1,1,${this._x1=x0},${this._y1=y0}`)}rect(x,y,w,h){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}h${+w}v${+h}h${-w}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(x,y){this._.push([x,y])}closePath(){this._.push(this._[0].slice())}lineTo(x,y){this._.push([x,y])}value(){return this._.length?this._:null}}class Voronoi{constructor(delaunay,[xmin,ymin,xmax,ymax]=[0,0,960,500]){if(!((xmax=+xmax)>=(xmin=+xmin)&&(ymax=+ymax)>=(ymin=+ymin)))throw new Error("invalid bounds");this.delaunay=delaunay,this._circumcenters=new Float64Array(2*delaunay.points.length),this.vectors=new Float64Array(2*delaunay.points.length),this.xmax=xmax,this.xmin=xmin,this.ymax=ymax,this.ymin=ymin,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points,hull,triangles},vectors}=this,circumcenters=this.circumcenters=this._circumcenters.subarray(0,triangles.length/3*2);for(let x,y,i=0,j=0,n=triangles.length;i<n;i+=3,j+=2){const t1=2*triangles[i],t2=2*triangles[i+1],t3=2*triangles[i+2],x1=points[t1],y1=points[t1+1],x2=points[t2],y2=points[t2+1],x3=points[t3],y3=points[t3+1],dx=x2-x1,dy=y2-y1,ex=x3-x1,ey=y3-y1,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,ab=2*(dx*ey-dy*ex);if(ab)if(Math.abs(ab)<1e-8)x=(x1+x3)/2,y=(y1+y3)/2;else{const d=1/ab;x=x1+(ey*bl-dy*cl)*d,y=y1+(dx*cl-ex*bl)*d}else x=(x1+x3)/2-1e8*ey,y=(y1+y3)/2+1e8*ex;circumcenters[j]=x,circumcenters[j+1]=y}let p0,x0,y0,h=hull[hull.length-1],p1=4*h,x1=points[2*h],y1=points[2*h+1];vectors.fill(0);for(let i=0;i<hull.length;++i)h=hull[i],p0=p1,x0=x1,y0=y1,p1=4*h,x1=points[2*h],y1=points[2*h+1],vectors[p0+2]=vectors[p1]=y0-y1,vectors[p0+3]=vectors[p1+1]=x1-x0}render(context){const buffer=null==context?context=new path_Path:void 0,{delaunay:{halfedges,inedges,hull},circumcenters,vectors}=this;if(hull.length<=1)return null;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*Math.floor(i/3),tj=2*Math.floor(j/3),xi=circumcenters[ti],yi=circumcenters[ti+1],xj=circumcenters[tj],yj=circumcenters[tj+1];this._renderSegment(xi,yi,xj,yj,context)}let h0,h1=hull[hull.length-1];for(let i=0;i<hull.length;++i){h0=h1,h1=hull[i];const t=2*Math.floor(inedges[h1]/3),x=circumcenters[t],y=circumcenters[t+1],v=4*h0,p=this._project(x,y,vectors[v+2],vectors[v+3]);p&&this._renderSegment(x,y,p[0],p[1],context)}return buffer&&buffer.value()}renderBounds(context){const buffer=null==context?context=new path_Path:void 0;return context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),buffer&&buffer.value()}renderCell(i,context){const buffer=null==context?context=new path_Path:void 0,points=this._clip(i);if(null===points||!points.length)return;context.moveTo(points[0],points[1]);let n=points.length;for(;points[0]===points[n-2]&&points[1]===points[n-1]&&n>1;)n-=2;for(let i=2;i<n;i+=2)points[i]===points[i-2]&&points[i+1]===points[i-1]||context.lineTo(points[i],points[i+1]);return context.closePath(),buffer&&buffer.value()}*cellPolygons(){const{delaunay:{points}}=this;for(let i=0,n=points.length/2;i<n;++i){const cell=this.cellPolygon(i);cell&&(cell.index=i,yield cell)}}cellPolygon(i){const polygon=new Polygon;return this.renderCell(i,polygon),polygon.value()}_renderSegment(x0,y0,x1,y1,context){let S;const c0=this._regioncode(x0,y0),c1=this._regioncode(x1,y1);0===c0&&0===c1?(context.moveTo(x0,y0),context.lineTo(x1,y1)):(S=this._clipSegment(x0,y0,x1,y1,c0,c1))&&(context.moveTo(S[0],S[1]),context.lineTo(S[2],S[3]))}contains(i,x,y){return(x=+x)==x&&(y=+y)==y&&this.delaunay._step(i,x,y)===i}*neighbors(i){const ci=this._clip(i);if(ci)for(const j of this.delaunay.neighbors(i)){const cj=this._clip(j);if(cj)loop:for(let ai=0,li=ci.length;ai<li;ai+=2)for(let aj=0,lj=cj.length;aj<lj;aj+=2)if(ci[ai]==cj[aj]&&ci[ai+1]==cj[aj+1]&&ci[(ai+2)%li]==cj[(aj+lj-2)%lj]&&ci[(ai+3)%li]==cj[(aj+lj-1)%lj]){yield j;break loop}}}_cell(i){const{circumcenters,delaunay:{inedges,halfedges,triangles}}=this,e0=inedges[i];if(-1===e0)return null;const points=[];let e=e0;do{const t=Math.floor(e/3);if(points.push(circumcenters[2*t],circumcenters[2*t+1]),e=e%3==2?e-2:e+1,triangles[e]!==i)break;e=halfedges[e]}while(e!==e0&&-1!==e);return points}_clip(i){if(0===i&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const points=this._cell(i);if(null===points)return null;const{vectors:V}=this,v=4*i;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],V[v+2],V[v+3]):this._clipFinite(i,points)}_clipFinite(i,points){const n=points.length;let x0,y0,c0,e0,e1,P=null,x1=points[n-2],y1=points[n-1],c1=this._regioncode(x1,y1);for(let j=0;j<n;j+=2)if(x0=x1,y0=y1,x1=points[j],y1=points[j+1],c0=c1,c1=this._regioncode(x1,y1),0===c0&&0===c1)e0=e1,e1=0,P?P.push(x1,y1):P=[x1,y1];else{let S,sx0,sy0,sx1,sy1;if(0===c0){if(null===(S=this._clipSegment(x0,y0,x1,y1,c0,c1)))continue;[sx0,sy0,sx1,sy1]=S}else{if(null===(S=this._clipSegment(x1,y1,x0,y0,c1,c0)))continue;[sx1,sy1,sx0,sy0]=S,e0=e1,e1=this._edgecode(sx0,sy0),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx0,sy0):P=[sx0,sy0]}e0=e1,e1=this._edgecode(sx1,sy1),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx1,sy1):P=[sx1,sy1]}if(P)e0=e1,e1=this._edgecode(P[0],P[1]),e0&&e1&&this._edge(i,e0,e1,P,P.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return P}_clipSegment(x0,y0,x1,y1,c0,c1){for(;;){if(0===c0&&0===c1)return[x0,y0,x1,y1];if(c0&c1)return null;let x,y,c=c0||c1;8&c?(x=x0+(x1-x0)*(this.ymax-y0)/(y1-y0),y=this.ymax):4&c?(x=x0+(x1-x0)*(this.ymin-y0)/(y1-y0),y=this.ymin):2&c?(y=y0+(y1-y0)*(this.xmax-x0)/(x1-x0),x=this.xmax):(y=y0+(y1-y0)*(this.xmin-x0)/(x1-x0),x=this.xmin),c0?(x0=x,y0=y,c0=this._regioncode(x0,y0)):(x1=x,y1=y,c1=this._regioncode(x1,y1))}}_clipInfinite(i,points,vx0,vy0,vxn,vyn){let p,P=Array.from(points);if((p=this._project(P[0],P[1],vx0,vy0))&&P.unshift(p[0],p[1]),(p=this._project(P[P.length-2],P[P.length-1],vxn,vyn))&&P.push(p[0],p[1]),P=this._clipFinite(i,P))for(let c0,j=0,n=P.length,c1=this._edgecode(P[n-2],P[n-1]);j<n;j+=2)c0=c1,c1=this._edgecode(P[j],P[j+1]),c0&&c1&&(j=this._edge(i,c0,c1,P,j),n=P.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(P=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return P}_edge(i,e0,e1,P,j){for(;e0!==e1;){let x,y;switch(e0){case 5:e0=4;continue;case 4:e0=6,x=this.xmax,y=this.ymin;break;case 6:e0=2;continue;case 2:e0=10,x=this.xmax,y=this.ymax;break;case 10:e0=8;continue;case 8:e0=9,x=this.xmin,y=this.ymax;break;case 9:e0=1;continue;case 1:e0=5,x=this.xmin,y=this.ymin}P[j]===x&&P[j+1]===y||!this.contains(i,x,y)||(P.splice(j,0,x,y),j+=2)}if(P.length>4)for(let i=0;i<P.length;i+=2){const j=(i+2)%P.length,k=(i+4)%P.length;(P[i]===P[j]&&P[j]===P[k]||P[i+1]===P[j+1]&&P[j+1]===P[k+1])&&(P.splice(j,2),i-=2)}return j}_project(x0,y0,vx,vy){let c,x,y,t=1/0;if(vy<0){if(y0<=this.ymin)return null;(c=(this.ymin-y0)/vy)<t&&(y=this.ymin,x=x0+(t=c)*vx)}else if(vy>0){if(y0>=this.ymax)return null;(c=(this.ymax-y0)/vy)<t&&(y=this.ymax,x=x0+(t=c)*vx)}if(vx>0){if(x0>=this.xmax)return null;(c=(this.xmax-x0)/vx)<t&&(x=this.xmax,y=y0+(t=c)*vy)}else if(vx<0){if(x0<=this.xmin)return null;(c=(this.xmin-x0)/vx)<t&&(x=this.xmin,y=y0+(t=c)*vy)}return[x,y]}_edgecode(x,y){return(x===this.xmin?1:x===this.xmax?2:0)|(y===this.ymin?4:y===this.ymax?8:0)}_regioncode(x,y){return(x<this.xmin?1:x>this.xmax?2:0)|(y<this.ymin?4:y>this.ymax?8:0)}}const delaunay_tau=2*Math.PI,pow=Math.pow;function pointX(p){return p[0]}function pointY(p){return p[1]}function jitter(x,y,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}class Delaunay{static from(points,fx=pointX,fy=pointY,that){return new Delaunay("length"in points?function flatArray(points,fx,fy,that){const n=points.length,array=new Float64Array(2*n);for(let i=0;i<n;++i){const p=points[i];array[2*i]=fx.call(that,p,i,points),array[2*i+1]=fy.call(that,p,i,points)}return array}(points,fx,fy,that):Float64Array.from(function*flatIterable(points,fx,fy,that){let i=0;for(const p of points)yield fx.call(that,p,i,points),yield fy.call(that,p,i,points),++i}(points,fx,fy,that)))}constructor(points){this._delaunator=new Delaunator(points),this.inedges=new Int32Array(points.length/2),this._hullIndex=new Int32Array(points.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const d=this._delaunator,points=this.points;if(d.hull&&d.hull.length>2&&function collinear(d){const{triangles,coords}=d;for(let i=0;i<triangles.length;i+=3){const a=2*triangles[i],b=2*triangles[i+1],c=2*triangles[i+2];if((coords[c]-coords[a])*(coords[b+1]-coords[a+1])-(coords[b]-coords[a])*(coords[c+1]-coords[a+1])>1e-10)return!1}return!0}(d)){this.collinear=Int32Array.from({length:points.length/2},((_,i)=>i)).sort(((i,j)=>points[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]));const e=this.collinear[0],f=this.collinear[this.collinear.length-1],bounds=[points[2*e],points[2*e+1],points[2*f],points[2*f+1]],r=1e-8*Math.hypot(bounds[3]-bounds[1],bounds[2]-bounds[0]);for(let i=0,n=points.length/2;i<n;++i){const p=jitter(points[2*i],points[2*i+1],r);points[2*i]=p[0],points[2*i+1]=p[1]}this._delaunator=new Delaunator(points)}else delete this.collinear;const halfedges=this.halfedges=this._delaunator.halfedges,hull=this.hull=this._delaunator.hull,triangles=this.triangles=this._delaunator.triangles,inedges=this.inedges.fill(-1),hullIndex=this._hullIndex.fill(-1);for(let e=0,n=halfedges.length;e<n;++e){const p=triangles[e%3==2?e-2:e+1];-1!==halfedges[e]&&-1!==inedges[p]||(inedges[p]=e)}for(let i=0,n=hull.length;i<n;++i)hullIndex[hull[i]]=i;hull.length<=2&&hull.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=hull[0],this.triangles[1]=hull[1],this.triangles[2]=hull[1],inedges[hull[0]]=1,2===hull.length&&(inedges[hull[1]]=0))}voronoi(bounds){return new Voronoi(this,bounds)}*neighbors(i){const{inedges,hull,_hullIndex,halfedges,triangles,collinear}=this;if(collinear){const l=collinear.indexOf(i);return l>0&&(yield collinear[l-1]),void(l<collinear.length-1&&(yield collinear[l+1]))}const e0=inedges[i];if(-1===e0)return;let e=e0,p0=-1;do{if(yield p0=triangles[e],e=e%3==2?e-2:e+1,triangles[e]!==i)return;if(e=halfedges[e],-1===e){const p=hull[(_hullIndex[i]+1)%hull.length];return void(p!==p0&&(yield p))}}while(e!==e0)}find(x,y,i=0){if((x=+x)!=x||(y=+y)!=y)return-1;const i0=i;let c;for(;(c=this._step(i,x,y))>=0&&c!==i&&c!==i0;)i=c;return c}_step(i,x,y){const{inedges,hull,_hullIndex,halfedges,triangles,points}=this;if(-1===inedges[i]||!points.length)return(i+1)%(points.length>>1);let c=i,dc=pow(x-points[2*i],2)+pow(y-points[2*i+1],2);const e0=inedges[i];let e=e0;do{let t=triangles[e];const dt=pow(x-points[2*t],2)+pow(y-points[2*t+1],2);if(dt<dc&&(dc=dt,c=t),e=e%3==2?e-2:e+1,triangles[e]!==i)break;if(e=halfedges[e],-1===e){if(e=hull[(_hullIndex[i]+1)%hull.length],e!==t&&pow(x-points[2*e],2)+pow(y-points[2*e+1],2)<dc)return e;break}}while(e!==e0);return c}render(context){const buffer=null==context?context=new path_Path:void 0,{points,halfedges,triangles}=this;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*triangles[i],tj=2*triangles[j];context.moveTo(points[ti],points[ti+1]),context.lineTo(points[tj],points[tj+1])}return this.renderHull(context),buffer&&buffer.value()}renderPoints(context,r=2){const buffer=null==context?context=new path_Path:void 0,{points}=this;for(let i=0,n=points.length;i<n;i+=2){const x=points[i],y=points[i+1];context.moveTo(x+r,y),context.arc(x,y,r,0,delaunay_tau)}return buffer&&buffer.value()}renderHull(context){const buffer=null==context?context=new path_Path:void 0,{hull,points}=this,h=2*hull[0],n=hull.length;context.moveTo(points[h],points[h+1]);for(let i=1;i<n;++i){const h=2*hull[i];context.lineTo(points[h],points[h+1])}return context.closePath(),buffer&&buffer.value()}hullPolygon(){const polygon=new Polygon;return this.renderHull(polygon),polygon.value()}renderTriangle(i,context){const buffer=null==context?context=new path_Path:void 0,{points,triangles}=this,t0=2*triangles[i*=3],t1=2*triangles[i+1],t2=2*triangles[i+2];return context.moveTo(points[t0],points[t0+1]),context.lineTo(points[t1],points[t1+1]),context.lineTo(points[t2],points[t2+1]),context.closePath(),buffer&&buffer.value()}*trianglePolygons(){const{triangles}=this;for(let i=0,n=triangles.length/3;i<n;++i)yield this.trianglePolygon(i)}trianglePolygon(i){const polygon=new Polygon;return this.renderTriangle(i,polygon),polygon.value()}}function Voronoi_Voronoi(){var _useChartContext=useChartContext(),getOptions=_useChartContext.getOptions,focusedDatumState=_useChartContext.focusedDatumState,isInteractingState=_useChartContext.isInteractingState,setFocusedDatum=focusedDatumState[1],isInteracting=isInteractingState[0],_getOptions=getOptions(),onFocusDatum=_getOptions.onFocusDatum,onClickDatum=_getOptions.onClickDatum,tooltip=_getOptions.tooltip,primaryCursor=_getOptions.primaryCursor,secondaryCursor=_getOptions.secondaryCursor,showVoronoi=_getOptions.showVoronoi,interactionMode=_getOptions.interactionMode,handleFocus=react.useCallback((function(datum){var _getOptions$onFocusDa,_getOptions2;null==(_getOptions$onFocusDa=(_getOptions2=getOptions()).onFocusDatum)||_getOptions$onFocusDa.call(_getOptions2,datum),setFocusedDatum(datum)}),[getOptions,setFocusedDatum]);if(!(isInteracting&&(showVoronoi||onFocusDatum||onClickDatum||tooltip||primaryCursor||secondaryCursor)))return null;var props={handleFocus};return"closest"===interactionMode?react.createElement(SingleVoronoi,props):react.createElement(PrimaryVoronoi,props)}function PrimaryVoronoi(_ref){var handleFocus=_ref.handleFocus,_useChartContext2=useChartContext(),primaryAxis=_useChartContext2.primaryAxis,secondaryAxes=_useChartContext2.secondaryAxes,getOptions=_useChartContext2.getOptions,gridDimensions=_useChartContext2.gridDimensions,datumsByInteractionGroup=_useChartContext2.datumsByInteractionGroup,stackedVoronoi=1===secondaryAxes.length&&secondaryAxes[0].stacked,useBarPx=secondaryAxes.every((function(d){return"bar"===d.elementType&&!d.stacked}));return react.useMemo((function(){var preColumns=Array.from(datumsByInteractionGroup.entries()).map((function(_ref2){_ref2[0];return _ref2[1]})).filter((function(datums){var datum=datums[0];if(datum){var primaryValue=datum.primaryValue;return"undefined"!==primaryValue&&null!==primaryValue}})).sort((function(a,b){var aAxis=secondaryAxes.find((function(d){return d.id===a[0].secondaryAxisId})),bAxis=secondaryAxes.find((function(d){return d.id===b[0].secondaryAxisId}));return Voronoi_getPrimary(a[0],primaryAxis,aAxis,useBarPx)-Voronoi_getPrimary(b[0],primaryAxis,bAxis,useBarPx)}));primaryAxis.isVertical&&preColumns.reverse();var columns=preColumns.map((function(datums,i,all){var _primaryAxis$scale$ra,datum=datums[0],prev=all[i-1],next=all[i+1],secondaryAxis=secondaryAxes.find((function(d){return d.id===datum.secondaryAxisId})),primaryPx=Voronoi_getPrimary(datum,primaryAxis,secondaryAxis,useBarPx),range=null!=(_primaryAxis$scale$ra=null==primaryAxis?void 0:primaryAxis.scale.range())?_primaryAxis$scale$ra:[0,0],primaryStart=range[0],primaryEnd=range[1];if(prev){var _secondaryAxis=secondaryAxes.find((function(d){return d.id===prev[0].secondaryAxisId}));primaryStart=primaryPx-(primaryPx-Voronoi_getPrimary(prev[0],primaryAxis,_secondaryAxis,useBarPx))/2}if(next){var _secondaryAxis2=secondaryAxes.find((function(d){return d.id===next[0].secondaryAxisId}));primaryEnd=primaryPx+(Voronoi_getPrimary(next[0],primaryAxis,_secondaryAxis2,useBarPx)-primaryPx)/2}return{primaryStart,primaryEnd,primaryPx,datumBoundaries:datums.filter((function(datum){var secondaryValue=datum.secondaryValue;return null!=secondaryValue})).map((function(datum,i,all){var _secondaryAxis$scale3,_datum$stackData3,_secondaryAxis$scale$2,prev=all[i-1],next=all[i+1],secondaryAxis=secondaryAxes.find((function(d){return d.id===datum.secondaryAxisId}));if(stackedVoronoi){var _secondaryAxis$scale$,_datum$stackData,_datum$stackData2,_range=null!=(_secondaryAxis$scale$=null==secondaryAxis?void 0:secondaryAxis.scale.range())?_secondaryAxis$scale$:[0,0],stackData=[null==(_datum$stackData=datum.stackData)?void 0:_datum$stackData[0],null==(_datum$stackData2=datum.stackData)?void 0:_datum$stackData2[1]];null!=secondaryAxis&&secondaryAxis.isVertical&&(_range.reverse(),stackData.reverse());var _secondaryAxis$scale,_stackData$,_secondaryAxis$scale2,_stackData$2,_secondaryStart=_range[0],_secondaryEnd=_range[1];if(prev)_secondaryStart=null!=(_secondaryAxis$scale=null==secondaryAxis?void 0:secondaryAxis.scale(null!=(_stackData$=stackData[0])?_stackData$:NaN))?_secondaryAxis$scale:NaN;if(next)_secondaryEnd=null!=(_secondaryAxis$scale2=null==secondaryAxis?void 0:secondaryAxis.scale(null!=(_stackData$2=stackData[1])?_stackData$2:NaN))?_secondaryAxis$scale2:NaN;return{secondaryStart:_secondaryStart,secondaryEnd:_secondaryEnd,datum}}var value=null!=(_secondaryAxis$scale3=null==secondaryAxis?void 0:secondaryAxis.scale(secondaryAxis.stacked?null==(_datum$stackData3=datum.stackData)?void 0:_datum$stackData3[1]:datum.secondaryValue))?_secondaryAxis$scale3:NaN,range=null!=(_secondaryAxis$scale$2=null==secondaryAxis?void 0:secondaryAxis.scale.range())?_secondaryAxis$scale$2:[0,0];null!=secondaryAxis&&secondaryAxis.isVertical&&range.reverse();var secondaryStart=range[0],secondaryEnd=range[1];if(prev){var _prevAxis$scale,_prev$stackData,prevAxis=secondaryAxes.find((function(d){return d.id===(null==prev?void 0:prev.secondaryAxisId)}));secondaryStart=value-(value-(null!=(_prevAxis$scale=null==prevAxis?void 0:prevAxis.scale(prevAxis.stacked?null==(_prev$stackData=prev.stackData)?void 0:_prev$stackData[1]:prev.secondaryValue))?_prevAxis$scale:NaN))/2}if(next){var _nextAxis$scale,_next$stackData,nextAxis=secondaryAxes.find((function(d){return d.id===(null==next?void 0:next.secondaryAxisId)}));secondaryEnd=value+((null!=(_nextAxis$scale=null==nextAxis?void 0:nextAxis.scale(nextAxis.stacked?null==(_next$stackData=next.stackData)?void 0:_next$stackData[1]:next.secondaryValue))?_nextAxis$scale:NaN)-value)/2}return{secondaryStart,secondaryEnd,datum}}))}}));return react.createElement("g",{onMouseLeave:function onMouseLeave(){return handleFocus(null)},style:{transform:translate(gridDimensions.left,gridDimensions.top)}},columns.map((function(column,i){return react.createElement("g",{key:column.primaryPx+"_"+i},column.datumBoundaries.map((function(datumBoundary,i){var x1=primaryAxis.isVertical?datumBoundary.secondaryStart:column.primaryStart,x2=primaryAxis.isVertical?datumBoundary.secondaryEnd:column.primaryEnd,y1=primaryAxis.isVertical?column.primaryStart:datumBoundary.secondaryStart,y2=primaryAxis.isVertical?column.primaryEnd:datumBoundary.secondaryEnd,x=Math.min(x1,x2),y=Math.min(y1,y2),xEnd=Math.max(x1,x2),yEnd=Math.max(y1,y2),height=Math.max(yEnd-y,0),width=Math.max(xEnd-x,0);return react.createElement("rect",{key:i,x,y,width,height,className:"action-voronoi",onMouseEnter:function onMouseEnter(){return handleFocus(datumBoundary.datum)},style:{fill:getOptions().dark?"#ffffff33":"rgba(0,0,0,0.2)",strokeWidth:1,stroke:getOptions().dark?"white":"black",opacity:getOptions().showVoronoi?1:0}})})))})))}),[datumsByInteractionGroup,primaryAxis,gridDimensions.left,gridDimensions.top,secondaryAxes,useBarPx,stackedVoronoi,handleFocus,getOptions])}var delaunayLineFn=line();function SingleVoronoi(_ref3){var handleFocus=_ref3.handleFocus,_useChartContext3=useChartContext(),primaryAxis=_useChartContext3.primaryAxis,series=_useChartContext3.series,secondaryAxes=_useChartContext3.secondaryAxes,getOptions=_useChartContext3.getOptions,gridDimensions=_useChartContext3.gridDimensions,polygons=null,voronoiData=[],useBarPx=secondaryAxes.every((function(d){return"bar"===d.elementType&&!d.stacked}));return series.forEach((function(serie){serie.datums.filter((function(datum){var primaryValue=datum.primaryValue,secondaryValue=datum.secondaryValue;return"undefined"!==primaryValue&&null!==primaryValue&&"undefined"!==secondaryValue&&null!==secondaryValue})).forEach((function(datum){var secondaryAxis=secondaryAxes.find((function(d){return d.id===datum.secondaryAxisId})),x=function Voronoi_getX(datum,primaryAxis,secondaryAxis,useBarPx){return primaryAxis.isVertical?Voronoi_getSecondary(datum,secondaryAxis):Voronoi_getPrimary(datum,primaryAxis,secondaryAxis,useBarPx)}(datum,primaryAxis,secondaryAxis,useBarPx),y=function Voronoi_getY(datum,primaryAxis,secondaryAxis,useBarPx){return primaryAxis.isVertical?Voronoi_getPrimary(datum,primaryAxis,secondaryAxis,useBarPx):Voronoi_getSecondary(datum,secondaryAxis)}(datum,primaryAxis,secondaryAxis,useBarPx);"number"!=typeof x||"number"!=typeof y||Number.isNaN(y)||Number.isNaN(x)||voronoiData.push({x,y,datum})}))})),polygons=Delaunay.from(voronoiData,(function(d){return Math.max(d.x,0)}),(function(d){return Math.max(d.y,0)})).voronoi([0,0,gridDimensions.width,gridDimensions.height]).cellPolygons(),polygons=Array.from(polygons),react.createElement("g",{onMouseLeave:function onMouseLeave(){return handleFocus(null)},style:{transform:translate(gridDimensions.left,gridDimensions.top)}},polygons.map((function(points,i){var index=points.index,datum=voronoiData[index].datum,path=delaunayLineFn(points)||void 0;return react.createElement("path",{key:i,d:path,className:"action-voronoi",onMouseEnter:function onMouseEnter(){return handleFocus(datum)},style:{fill:getOptions().dark?"#ffffff33":"rgba(0,0,0,0.2)",strokeWidth:1,stroke:getOptions().dark?"white":"black",opacity:getOptions().showVoronoi?1:0}})})))}function Voronoi_getPrimary(datum,primaryAxis,secondaryAxis,useBarPx){var _primaryAxis$scale,_ref4,primary=null!=(_primaryAxis$scale=primaryAxis.scale(datum.primaryValue))?_primaryAxis$scale:NaN;useBarPx&&"bar"===secondaryAxis.elementType&&(secondaryAxis.stacked?primary+=getPrimaryGroupLength(0,primaryAxis)/2:(primary+=null!=(_ref4=primaryAxis.seriesBandScale(datum.seriesIndex))?_ref4:NaN,primary+=getPrimaryLength(0,primaryAxis,secondaryAxis)/2));return primary}function Voronoi_getSecondary(datum,secondaryAxis){var _secondaryAxis$scale5,_secondaryAxis$scale4,_datum$stackData$,_datum$stackData4;return secondaryAxis.stacked?null!=(_secondaryAxis$scale4=secondaryAxis.scale(null!=(_datum$stackData$=null==(_datum$stackData4=datum.stackData)?void 0:_datum$stackData4[1])?_datum$stackData$:NaN))?_secondaryAxis$scale4:NaN:null!=(_secondaryAxis$scale5=secondaryAxis.scale(datum.secondaryValue))?_secondaryAxis$scale5:NaN}var Chart_excluded=["options","className","style"],defaultColorScheme=["#0f83ab","#faa43a","#fd6868","#53cfc9","#a2d925","#decf3f","#734fe9","#cd82ad","#006d92","#de7c00","#f33232","#3f9a80","#53c200","#d7af00","#4c26c9","#d44d99"],defaultPadding=5;function Chart(_ref){var userOptions=_ref.options,className=_ref.className,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,rest=(0,objectWithoutPropertiesLoose.Z)(_ref,Chart_excluded),options=function defaultChartOptions(options){var _options$initialWidth,_options$initialHeigh,_options$getSeriesOrd,_options$interactionM,_options$showVoronoi,_options$defaultColor,_options$useIntersect,_options$intersection,_options$primaryCurso,_options$secondaryCur,_options$padding;return(0,esm_extends.Z)({},options,{initialWidth:null!=(_options$initialWidth=options.initialWidth)?_options$initialWidth:300,initialHeight:null!=(_options$initialHeigh=options.initialHeight)?_options$initialHeigh:200,getSeriesOrder:null!=(_options$getSeriesOrd=options.getSeriesOrder)?_options$getSeriesOrd:function(series){return series},interactionMode:null!=(_options$interactionM=options.interactionMode)?_options$interactionM:"primary",showVoronoi:null!=(_options$showVoronoi=options.showVoronoi)&&_options$showVoronoi,defaultColors:null!=(_options$defaultColor=options.defaultColors)?_options$defaultColor:defaultColorScheme,useIntersectionObserver:null!=(_options$useIntersect=options.useIntersectionObserver)&&_options$useIntersect,intersectionObserverRootMargin:null!=(_options$intersection=options.intersectionObserverRootMargin)?_options$intersection:"1000px",primaryCursor:null==(_options$primaryCurso=options.primaryCursor)||_options$primaryCurso,secondaryCursor:null==(_options$secondaryCur=options.secondaryCursor)||_options$secondaryCur,padding:null!=(_options$padding=options.padding)?_options$padding:defaultPadding})}(userOptions),_React$useState=react.useState(null),chartElement=_React$useState[0],setContainerElement=_React$useState[1],containerEl=null==chartElement?void 0:chartElement.parentElement,nearestScrollableParent=react.useMemo((function(){return function run(el){if(!el)return null;var grandParent=el.parentElement;if(!grandParent)return null;if(grandParent.scrollHeight>grandParent.clientHeight){var overflow=window.getComputedStyle(grandParent).overflow;if(overflow.includes("scroll")||overflow.includes("auto"))return grandParent}return run(grandParent)}(containerEl)}),[containerEl]),_React$useState2=react.useState({width:options.initialWidth,height:options.initialHeight}),_React$useState2$=_React$useState2[0],width=_React$useState2$.width,height=_React$useState2$.height,setDims=_React$useState2[1];useIsomorphicLayoutEffect((function(){if(containerEl){var computed=window.getComputedStyle(containerEl);["relative","absolute","fixed"].includes(computed.position)||(containerEl.style.position="relative")}}),[containerEl]),react.useEffect((function(){if(containerEl){var observer=new ResizeObserver((function(){var rect=null==containerEl?void 0:containerEl.getBoundingClientRect(),styles=window.getComputedStyle(containerEl);rect&&setDims({width:rect.width-parseInt(styles.borderLeftWidth)-parseInt(styles.borderRightWidth),height:rect.height-parseInt(styles.borderTopWidth)-parseInt(styles.borderBottomWidth)})}));return observer.observe(containerEl),function(){observer.unobserve(containerEl)}}}),[containerEl]);var _React$useState3=react.useState(!0),isIntersecting=_React$useState3[0],setIsIntersecting=_React$useState3[1];return react.useEffect((function(){if(containerEl&&options.useIntersectionObserver){var observer=new IntersectionObserver((function(entries){for(var _step,_iterator=_createForOfIteratorHelperLoose(entries);!(_step=_iterator()).done;){_step.value.isIntersecting?setIsIntersecting(!0):setIsIntersecting(!1)}}),{root:nearestScrollableParent,rootMargin:options.intersectionObserverRootMargin});return observer.observe(containerEl),function(){observer.unobserve(containerEl)}}}),[containerEl,nearestScrollableParent,options.intersectionObserverRootMargin,options.useIntersectionObserver]),react.createElement("div",(0,esm_extends.Z)({ref:setContainerElement},rest,{className:"ReactChart "+(className||""),style:(0,esm_extends.Z)({fontFamily:"sans-serif"},style,{position:"absolute",width,height})}),options.useIntersectionObserver&&!isIntersecting?null:react.createElement(ChartInner,{options,width,height}))}function ChartInner(_ref2){var _options2,_options$renderSVG,options=_ref2.options,width=_ref2.width,height=_ref2.height;if(!options.primaryAxis)throw new Error("A primaryAxis is required");if(!options.secondaryAxes.length)throw new Error("At least one secondaryAxis is required");var primaryAxisOptions=react.useMemo((function(){var firstValue=getFirstDefinedValue(options.primaryAxis,options.data),axisOptions=axisOptionsWithScaleType(options.primaryAxis,firstValue);return(0,esm_extends.Z)({position:"bottom"},axisOptions)}),[options.data,options.primaryAxis]),secondaryAxesOptions=react.useMemo((function(){return options.secondaryAxes.map((function(secondaryAxis,i){var axisOptions=axisOptionsWithScaleType(secondaryAxis,getFirstDefinedValue(secondaryAxis,options.data));return axisOptions.elementType||("band"===primaryAxisOptions.scaleType?axisOptions.elementType="bar":axisOptions.stacked&&(axisOptions.elementType="area")),void 0===axisOptions.stacked&&axisOptions.elementType&&["area"].includes(axisOptions.elementType)&&(axisOptions.stacked=!0),(0,esm_extends.Z)({position:i?"right":"left"},axisOptions)}))}),[options.data,options.secondaryAxes,primaryAxisOptions]),tooltipOptions=react.useMemo((function(){var _options,_tooltipOptions$group,tooltipOptions=function defaultTooltip(options){var _options$align,_options$alignPriorit,_options$padding,_options$arrowPadding,_options$render;return void 0===options&&(options={}),!0===options?options={show:!0}:!1===options&&(options={show:!1}),(0,esm_extends.Z)({show:!0},options,{align:null!=(_options$align=options.align)?_options$align:"auto",alignPriority:null!=(_options$alignPriorit=options.alignPriority)?_options$alignPriorit:["right","topRight","bottomRight","left","topLeft","bottomLeft","top","bottom"],padding:null!=(_options$padding=options.padding)?_options$padding:5,arrowPadding:null!=(_options$arrowPadding=options.arrowPadding)?_options$arrowPadding:7,render:null!=(_options$render=options.render)?_options$render:tooltipRenderer})}(null==(_options=options)?void 0:_options.tooltip);return tooltipOptions.groupingMode=null!=(_tooltipOptions$group=tooltipOptions.groupingMode)?_tooltipOptions$group:"closest"===options.interactionMode?"single":"primary",tooltipOptions}),[options.interactionMode,null==(_options2=options)?void 0:_options2.tooltip]);options=(0,esm_extends.Z)({},options,{tooltip:tooltipOptions});var svgRef=react.useRef(null),getOptions=useGetLatest((0,esm_extends.Z)({},options,{tooltip:tooltipOptions})),axisDimensionsState=react.useState({left:{},right:{},top:{},bottom:{}}),axisDimensions=axisDimensionsState[0],isInteractingState=react.useState(!1),isInteracting=isInteractingState[0],focusedDatumState=react.useState(null),focusedDatum=focusedDatumState[0],gridDimensions=react.useMemo((function(){var _options$padding$left,_options$padding$righ,_options$padding$bott,_options$padding$top,padding_left="object"==typeof options.padding?null!=(_options$padding$left=options.padding.left)?_options$padding$left:defaultPadding:options.padding,padding_right="object"==typeof options.padding?null!=(_options$padding$righ=options.padding.right)?_options$padding$righ:defaultPadding:options.padding,padding_bottom="object"==typeof options.padding?null!=(_options$padding$bott=options.padding.bottom)?_options$padding$bott:defaultPadding:options.padding,padding_top="object"==typeof options.padding?null!=(_options$padding$top=options.padding.top)?_options$padding$top:defaultPadding:options.padding,left=padding_left+Math.max(sum(Object.values(axisDimensions.left),(function(d){return d.width})),sum(Object.values(axisDimensions.top),(function(d){return d.paddingLeft})),sum(Object.values(axisDimensions.bottom),(function(d){return d.paddingLeft}))),top=padding_top+Math.max(sum(Object.values(axisDimensions.top),(function(d){return d.height})),sum(Object.values(axisDimensions.left),(function(d){return d.paddingTop})),sum(Object.values(axisDimensions.right),(function(d){return d.paddingTop}))),right=padding_right+Math.max(sum(Object.values(axisDimensions.right),(function(d){return d.width})),sum(Object.values(axisDimensions.top),(function(d){return d.paddingRight})),sum(Object.values(axisDimensions.bottom),(function(d){return d.paddingRight}))),bottom=padding_bottom+Math.max(sum(Object.values(axisDimensions.bottom),(function(d){return d.height})),sum(Object.values(axisDimensions.left),(function(d){return d.paddingBottom})),sum(Object.values(axisDimensions.right),(function(d){return d.paddingBottom})));return{left,top,right,bottom,width:Math.max(0,width-left-right),height:Math.max(0,height-top-bottom)}}),[options.padding,axisDimensions.left,axisDimensions.top,axisDimensions.bottom,axisDimensions.right,width,height]),series=react.useMemo((function(){for(var series=[],indicesByAxisId={},seriesIndex=0;seriesIndex<options.data.length;seriesIndex++){var _originalSeries$id,_originalSeries$label,_indicesByAxisId$,originalSeries=options.data[seriesIndex],seriesId=null!=(_originalSeries$id=originalSeries.id)?_originalSeries$id:seriesIndex+"",seriesLabel=null!=(_originalSeries$label=originalSeries.label)?_originalSeries$label:"Series "+(seriesIndex+1),secondaryAxisId=originalSeries.secondaryAxisId,originalDatums=originalSeries.data,datums=[];indicesByAxisId[""+secondaryAxisId]=null!=(_indicesByAxisId$=indicesByAxisId[""+secondaryAxisId])?_indicesByAxisId$:0;var seriesIndexPerAxis=indicesByAxisId[""+secondaryAxisId];indicesByAxisId[""+secondaryAxisId]++;for(var datumIndex=0;datumIndex<originalDatums.length;datumIndex++){var originalDatum=originalDatums[datumIndex];datums[datumIndex]={originalSeries,seriesIndex,seriesIndexPerAxis,seriesId,seriesLabel,secondaryAxisId,index:datumIndex,originalDatum}}series[seriesIndex]={originalSeries,index:seriesIndex,id:seriesId,label:seriesLabel,indexPerAxis:seriesIndexPerAxis,secondaryAxisId,datums}}return series}),[options.data]),allDatums=react.useMemo((function(){return series.map((function(s){return s.datums})).flat(2)}),[series]),primaryAxis=react.useMemo((function(){return buildAxisLinear(!0,primaryAxisOptions,series,allDatums,gridDimensions,width,height)}),[allDatums,gridDimensions,height,primaryAxisOptions,series,width]),secondaryAxes=react.useMemo((function(){return secondaryAxesOptions.map((function(secondaryAxis){return buildAxisLinear(!1,secondaryAxis,series,allDatums,gridDimensions,width,height)}))}),[allDatums,gridDimensions,height,secondaryAxesOptions,series,width]),_React$useMemo=react.useMemo((function(){if(!isInteracting)return[new Map,new Map];var datumsByInteractionGroup=new Map,datumsByTooltipGroup=new Map,allBarAndNotStacked=secondaryAxes.every((function(d){return"bar"===d.elementType&&!d.stacked})),getInteractionPrimary=function getInteractionPrimary(datum){if(allBarAndNotStacked){var secondaryAxis=secondaryAxes.find((function(d){return d.id===datum.secondaryAxisId}));if("bar"===secondaryAxis.elementType&&!secondaryAxis.stacked)return getPrimary(datum,primaryAxis,secondaryAxis)}return datum.primaryValue},getInteractionKey=function getInteractionKey(datum){return""+getInteractionPrimary(datum)},getTooltipKey=function getTooltipKey(datum){return""+datum.primaryValue};return"closest"===options.interactionMode&&(getInteractionKey=function getInteractionKey(datum){return getInteractionPrimary(datum)+"_"+datum.secondaryValue}),"single"===tooltipOptions.groupingMode?getTooltipKey=function getTooltipKey(datum){return datum.primaryValue+"_"+datum.secondaryValue}:"secondary"===tooltipOptions.groupingMode?getTooltipKey=function getTooltipKey(datum){return""+datum.secondaryValue}:"series"===tooltipOptions.groupingMode&&(getTooltipKey=function getTooltipKey(datum){return""+datum.seriesIndex}),allDatums.forEach((function(datum){var interactionKey=getInteractionKey(datum),tooltipKey=getTooltipKey(datum);datumsByInteractionGroup.has(interactionKey)||datumsByInteractionGroup.set(interactionKey,[]),datumsByTooltipGroup.has(tooltipKey)||datumsByTooltipGroup.set(tooltipKey,[]),datumsByInteractionGroup.get(interactionKey).push(datum),datumsByTooltipGroup.get(tooltipKey).push(datum)})),datumsByInteractionGroup.forEach((function(value,key){datumsByInteractionGroup.set(key,sortDatumsBySecondaryPx(value,secondaryAxes))})),datumsByTooltipGroup.forEach((function(value,key){datumsByTooltipGroup.set(key,sortDatumsBySecondaryPx(value,secondaryAxes))})),allDatums.forEach((function(datum){var interactionKey=getInteractionKey(datum),tooltipKey=getTooltipKey(datum);datum.interactiveGroup=datumsByInteractionGroup.get(interactionKey),datum.tooltipGroup=datumsByTooltipGroup.get(tooltipKey)})),[datumsByInteractionGroup,datumsByTooltipGroup]}),[isInteracting,allDatums,options.interactionMode,primaryAxis,secondaryAxes,tooltipOptions.groupingMode]),datumsByInteractionGroup=_React$useMemo[0],datumsByTooltipGroup=_React$useMemo[1],getSeriesStatusStyle=react.useCallback((function(series,focusedDatum){var _getOptions$getSeries,_getOptions$getSeries2,_getOptions,base={color:getOptions().defaultColors[series.index%getOptions().defaultColors.length]},status=function getSeriesStatus(series,focusedDatum){return(null==focusedDatum?void 0:focusedDatum.seriesId)===series.id?"focused":"none"}(series,focusedDatum),statusStyles=null!=(_getOptions$getSeries=null==(_getOptions$getSeries2=(_getOptions=getOptions()).getSeriesStyle)?void 0:_getOptions$getSeries2.call(_getOptions,series,status))?_getOptions$getSeries:{};return series.style=materializeStyles(statusStyles,base),series.style}),[getOptions]),getDatumStatusStyle=react.useCallback((function(datum,focusedDatum){var _series$datum$seriesI,_getOptions$getDatumS,_getOptions$getDatumS2,_getOptions2,base=(0,esm_extends.Z)({},null==(_series$datum$seriesI=series[datum.seriesIndex])?void 0:_series$datum$seriesI.style,{color:getOptions().defaultColors[datum.seriesIndex%getOptions().defaultColors.length]}),status=function getDatumStatus(datum,focusedDatum){var _datum$tooltipGroup;return datum===focusedDatum?"focused":null!=(_datum$tooltipGroup=datum.tooltipGroup)&&_datum$tooltipGroup.some((function(groupDatum){groupDatum.seriesId===(null==focusedDatum?void 0:focusedDatum.seriesId)&&(groupDatum.index,null==focusedDatum||focusedDatum.index)}))?"groupFocused":"none"}(datum,focusedDatum),statusStyles=null!=(_getOptions$getDatumS=null==(_getOptions$getDatumS2=(_getOptions2=getOptions()).getDatumStyle)?void 0:_getOptions$getDatumS2.call(_getOptions2,datum,status))?_getOptions$getDatumS:{};return datum.style=materializeStyles(statusStyles,base),datum.style}),[getOptions,series]),orderedSeries=react.useMemo((function(){var reversedSeries=[].concat(series).reverse();return getOptions().getSeriesOrder(reversedSeries)}),[getOptions,series]);useIsomorphicLayoutEffect((function(){svgRef.current&&svgRef.current.parentElement&&!svgRef.current.parentElement.style.position&&(svgRef.current.parentElement.style.position="relative")}));var contextValue={getOptions,gridDimensions,primaryAxis,secondaryAxes,series,orderedSeries,datumsByInteractionGroup,datumsByTooltipGroup,width,height,getSeriesStatusStyle,getDatumStatusStyle,axisDimensionsState,focusedDatumState,svgRef,isInteractingState},seriesByAxisId=react.useMemo((function(){return sort(function groups(values,...keys){return nest(values,Array.from,src_identity,keys)}(orderedSeries,(function(d){return d.secondaryAxisId})),(function(_ref3){var key=_ref3[0];return secondaryAxes.findIndex((function(axis){return axis.id===key}))}))}),[orderedSeries,secondaryAxes]),getSeriesInfo=function getSeriesInfo(){return{primaryAxis,secondaryAxes,seriesByAxisId}},getMemoizedSeriesInfo=react.useCallback((function(){return{primaryAxis,secondaryAxes,seriesByAxisId}}),[primaryAxis,secondaryAxes,seriesByAxisId]);options.memoizeSeries&&(getSeriesInfo=getMemoizedSeriesInfo);var seriesEl=react.useMemo((function(){var _getSeriesInfo=getSeriesInfo(),primaryAxis=_getSeriesInfo.primaryAxis,secondaryAxes=_getSeriesInfo.secondaryAxes;return _getSeriesInfo.seriesByAxisId.map((function(_ref4){var axisId=_ref4[0],series=_ref4[1],secondaryAxis=secondaryAxes.find((function(d){return d.id===axisId}));if(!secondaryAxis)return null;var elementType=secondaryAxis.elementType,Component=function(){if("line"===elementType||"bubble"===elementType||"area"===elementType)return Line;if("bar"===elementType)return BarComponent;throw new Error("Invalid elementType")}();return primaryAxis.isInvalid||secondaryAxis.isInvalid?null:react.createElement(Component,{key:null!=axisId?axisId:"__default__",primaryAxis,secondaryAxis,series})}))}),[getSeriesInfo]);return react.createElement(ChartContextProvider,{value:useGetLatest(contextValue)},react.createElement("div",null,react.createElement("svg",{ref:svgRef,style:{width,height,overflow:options.brush?"hidden":"visible"},onClick:function onClick(e){return null==options.onClickDatum?void 0:options.onClickDatum(focusedDatum,e)},onMouseEnter:function onMouseEnter(){isInteractingState[1](!0)},onMouseLeave:function onMouseLeave(){isInteractingState[1](!1)}},react.createElement("g",{className:"axes"},[primaryAxis].concat(secondaryAxes).map((function(axis){return react.createElement(AxisLinearComp,(0,esm_extends.Z)({key:[axis.position,axis.id].join("")},axis))}))),react.createElement("g",{className:"Series",style:{pointerEvents:"none"}},seriesEl),react.createElement(Voronoi_Voronoi,null),null!=(_options$renderSVG=null==options.renderSVG?void 0:options.renderSVG())?_options$renderSVG:null),react.createElement(Cursors,null),react.createElement(Tooltip,null)))}function getFirstDefinedValue(options,data){var firstDefinedValue;return data.some((function(serie){return serie.data.some((function(originalDatum){var value=options.getValue(originalDatum);if(null!=value)return firstDefinedValue=value,!0}))})),firstDefinedValue}function axisOptionsWithScaleType(options,firstValue){var scaleType=options.scaleType;if(!options.scaleType)if("number"==typeof firstValue)scaleType="linear";else if("function"==typeof(null==firstValue?void 0:firstValue.getMonth))scaleType="time";else{if("string"!=typeof firstValue&&"boolean"!=typeof firstValue)throw new Error("Invalid scale type: Unable to infer type from data");scaleType="band"}return(0,esm_extends.Z)({},options,{scaleType})}function sortDatumsBySecondaryPx(datums,secondaryAxes){if(secondaryAxes.every((function(d){return d.stacked}))&&!(secondaryAxes.some((function(d){return d.invert}))&&secondaryAxes.some((function(d){return!d.invert}))))return datums;return[].concat(datums).sort((function(a,b){var _aAxis$scale,_a$stackData,_bAxis$scale,_b$stackData,aAxis=secondaryAxes.find((function(d){return d.id===a.secondaryAxisId})),bAxis=secondaryAxes.find((function(d){return d.id===b.secondaryAxisId})),aPx=null!=(_aAxis$scale=null==aAxis?void 0:aAxis.scale(aAxis.stacked?null==(_a$stackData=a.stackData)?void 0:_a$stackData[1]:a.secondaryValue))?_aAxis$scale:NaN,bPx=null!=(_bAxis$scale=null==bAxis?void 0:bAxis.scale(bAxis.stacked?null==(_b$stackData=b.stackData)?void 0:_b$stackData[1]:b.secondaryValue))?_bAxis$scale:NaN;return aPx>bPx?1:aPx<bPx?-1:0}))}}}]);