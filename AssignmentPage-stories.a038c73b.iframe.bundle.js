"use strict";(self.webpackChunk_local_civics_candid_ui=self.webpackChunk_local_civics_candid_ui||[]).push([[3052],{"./stories/AssignmentPage.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Badge:()=>Badge,Lesson:()=>Lesson,__namedExportsOrder:()=>__namedExportsOrder,default:()=>AssignmentPage_stories});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),AppLayout=__webpack_require__("./src/layouts/app/AppLayout.tsx"),Container=__webpack_require__("./node_modules/@mantine/core/esm/Container/Container.js"),Stack=__webpack_require__("./node_modules/@mantine/core/esm/Stack/Stack.js"),Title=__webpack_require__("./node_modules/@mantine/core/esm/Title/Title.js"),Tabs=__webpack_require__("./node_modules/@mantine/core/esm/Tabs/Tabs.js"),Text=__webpack_require__("./node_modules/@mantine/core/esm/Text/Text.js"),Card=__webpack_require__("./node_modules/@mantine/core/esm/Card/Card.js"),ScrollArea=__webpack_require__("./node_modules/@mantine/core/esm/ScrollArea/ScrollArea.js"),es=__webpack_require__("./node_modules/react-charts/es/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function AssignmentSummary(props){const primaryAxis=react.useMemo((()=>({position:"left",getValue:datum=>datum.primary})),[]),secondaryAxes=react.useMemo((()=>[{position:"bottom",getValue:datum=>datum.secondary}]),[]),rows=props.summary.map((row=>{if(row.chart){const labelMap={},options=row.options||[];return options.forEach((o=>{labelMap[o]=0})),row.submissions?.forEach((s=>s.forEach((r=>{r in labelMap&&(labelMap[r]=labelMap[r]?labelMap[r]+1:1)})))),(0,jsx_runtime.jsx)(Card.Z,{withBorder:!0,p:"xl",radius:"md",children:(0,jsx_runtime.jsxs)(Stack.K,{spacing:4,children:[(0,jsx_runtime.jsx)(Title.D,{size:"lg",children:row.name}),(0,jsx_runtime.jsxs)(Text.x,{size:"sm",children:[row.submissionCount||row.submissions?.length," submissions"]}),(0,jsx_runtime.jsx)("div",{style:{background:"white",height:"300px",width:"100%",position:"relative"},children:(0,jsx_runtime.jsx)(es.k,{options:{data:[{label:"",data:options.map((o=>({primary:truncateWithEllipses(o,50),secondary:labelMap[o]})))}],primaryAxis,secondaryAxes}})})]})},row.name)}return(0,jsx_runtime.jsx)(Card.Z,{withBorder:!0,p:"xl",radius:"md",children:(0,jsx_runtime.jsxs)(Stack.K,{spacing:4,children:[(0,jsx_runtime.jsx)(Title.D,{size:"lg",children:row.name}),(0,jsx_runtime.jsxs)(Text.x,{size:"sm",children:[row.submissionCount||row.submissions?.length," submissions"]}),(0,jsx_runtime.jsx)(ScrollArea.x.Autosize,{mah:600,children:(0,jsx_runtime.jsx)(Stack.K,{spacing:4,children:row.submissions?.map((s=>{const submissionText=s.join("\n");return(0,jsx_runtime.jsx)(Card.Z,{p:5,radius:0,bg:"gray.0",children:(0,jsx_runtime.jsx)(Text.x,{children:submissionText})},submissionText)}))})})]})},row.name)}));return(0,jsx_runtime.jsx)(Stack.K,{py:4,spacing:10,sx:{minWidth:700},children:rows})}AssignmentSummary.displayName="AssignmentSummary";const truncateWithEllipses=(text,max)=>text.substring(0,max-1)+(text.length>max?"&hellip;":"");try{AssignmentSummary.displayName="AssignmentSummary",AssignmentSummary.__docgenInfo={description:"AssignmentSummary",displayName:"AssignmentSummary",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"archived"'},{value:'"open"'},{value:'"assigned to me"'}]}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"AssignmentSummaryItemData[]"}},breakdown:{defaultValue:null,description:"",name:"breakdown",required:!0,type:{name:"AssignmentBreakdownItemData[]"}},grouping:{defaultValue:null,description:"",name:"grouping",required:!1,type:{name:"string[]"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:'{ accessorKey: string; header: string; filterVariant?: "select" | "text" | "checkbox" | "date" | "date-range" | "multi-select" | "range" | undefined; mantineFilterSelectProps?: { data: any; } | undefined; size?: number | undefined; }[]'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/assignment/tab/AssignmentSummary.tsx#AssignmentSummary"]={docgenInfo:AssignmentSummary.__docgenInfo,name:"AssignmentSummary",path:"src/components/assignment/tab/AssignmentSummary.tsx#AssignmentSummary"})}catch(__react_docgen_typescript_loader_error){}var Box=__webpack_require__("./node_modules/@mantine/core/esm/Box/Box.js"),Avatar=__webpack_require__("./node_modules/@mantine/core/esm/Avatar/Avatar.js"),Button=__webpack_require__("./node_modules/@mantine/core/esm/Button/Button.js"),IconDownload=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconDownload.js"),mantine_react_table_esm=__webpack_require__("./node_modules/mantine-react-table/dist/esm/mantine-react-table.esm.js"),helpers=__webpack_require__("./src/components/core/avatar/helpers.ts"),styles=__webpack_require__("./src/components/assignment/styles.ts"),build=__webpack_require__("./node_modules/export-to-csv/build/index.js");function AssignmentBreakdown(props){const{classes}=(0,styles.r)(),columns=(0,react.useMemo)((()=>[{accessorFn:row=>row.assignee,id:"assignee",header:"Assignee",size:250,Cell:({renderedCellValue,row})=>{const avatarURL=(0,helpers.t)(row.original.avatarURL,row.original.assignee);return(0,jsx_runtime.jsxs)(Box.x,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,jsx_runtime.jsx)(Avatar.q,{size:30,className:classes.userAvatar,src:avatarURL,radius:"xl"}),(0,jsx_runtime.jsx)("span",{children:renderedCellValue})]})}},{accessorKey:"status",accessorFn:originalRow=>originalRow.status.toLowerCase().replace(/\b\w/g,(s=>s.toUpperCase())),id:"status",header:"Status",filterVariant:"select",mantineFilterSelectProps:{data:["Incomplete","In Progress","Complete"]},size:200},...props.columns]),[]),csvExporter=new build.ExportToCsv({fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,useBom:!0,useKeysAsHeaders:!0,filename:"localcivics-export"}),handleExportRows=rows=>{csvExporter.generateCsv(rows.map((row=>row.original)))},handleExportData=()=>{csvExporter.generateCsv(props.breakdown)};return(0,jsx_runtime.jsx)(mantine_react_table_esm.ZO,{enableColumnOrdering:!0,enableColumnFilterModes:!0,enableGrouping:!0,columns,data:props.breakdown,initialState:{showColumnFilters:!0,grouping:props.grouping},enableRowSelection:!0,positionExpandColumn:"last",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:({table})=>(0,jsx_runtime.jsxs)(Box.x,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:[(0,jsx_runtime.jsx)(Button.z,{color:"lightblue",onClick:handleExportData,leftIcon:(0,jsx_runtime.jsx)(IconDownload.Z,{}),variant:"filled",children:"Export All Data"}),(0,jsx_runtime.jsx)(Button.z,{disabled:0===table.getPrePaginationRowModel().rows.length,onClick:()=>handleExportRows(table.getPrePaginationRowModel().rows),leftIcon:(0,jsx_runtime.jsx)(IconDownload.Z,{}),variant:"filled",children:"Export All Rows"}),(0,jsx_runtime.jsx)(Button.z,{disabled:!table.getIsSomeRowsSelected()&&!table.getIsAllRowsSelected(),onClick:()=>handleExportRows(table.getSelectedRowModel().rows),leftIcon:(0,jsx_runtime.jsx)(IconDownload.Z,{}),variant:"filled",children:"Export Selected Rows"})]})})}AssignmentBreakdown.displayName="AssignmentBreakdown";try{AssignmentBreakdown.displayName="AssignmentBreakdown",AssignmentBreakdown.__docgenInfo={description:"AssignmentBreakdown",displayName:"AssignmentBreakdown",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"archived"'},{value:'"open"'},{value:'"assigned to me"'}]}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"AssignmentSummaryItemData[]"}},breakdown:{defaultValue:null,description:"",name:"breakdown",required:!0,type:{name:"AssignmentBreakdownItemData[]"}},grouping:{defaultValue:null,description:"",name:"grouping",required:!1,type:{name:"string[]"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:'{ accessorKey: string; header: string; filterVariant?: "select" | "text" | "checkbox" | "date" | "date-range" | "multi-select" | "range" | undefined; mantineFilterSelectProps?: { data: any; } | undefined; size?: number | undefined; }[]'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/assignment/tab/AssignmentBreakdown.tsx#AssignmentBreakdown"]={docgenInfo:AssignmentBreakdown.__docgenInfo,name:"AssignmentBreakdown",path:"src/components/assignment/tab/AssignmentBreakdown.tsx#AssignmentBreakdown"})}catch(__react_docgen_typescript_loader_error){}var IconChartArrows=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconChartArrows.js"),IconListNumbers=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconListNumbers.js");function AssignmentPage(props){return(0,jsx_runtime.jsx)(Container.W,{size:"lg",pb:"xl",children:(0,jsx_runtime.jsxs)(Stack.K,{spacing:10,children:[(0,jsx_runtime.jsx)(Title.D,{color:"dark.4",children:props.name}),(0,jsx_runtime.jsxs)(Tabs.m,{defaultValue:"summary",children:[(0,jsx_runtime.jsxs)(Tabs.m.List,{children:[(0,jsx_runtime.jsx)(Tabs.m.Tab,{icon:(0,jsx_runtime.jsx)(IconChartArrows.Z,{}),value:"summary",children:(0,jsx_runtime.jsx)(Text.x,{px:15,py:10,children:"Summary"})}),(0,jsx_runtime.jsx)(Tabs.m.Tab,{icon:(0,jsx_runtime.jsx)(IconListNumbers.Z,{}),value:"breakdown",children:(0,jsx_runtime.jsx)(Text.x,{px:15,py:10,children:"Breakdown"})})]}),(0,jsx_runtime.jsx)(Tabs.m.Panel,{value:"summary",pt:"xs",children:(0,jsx_runtime.jsx)(AssignmentSummary,{...props})}),(0,jsx_runtime.jsx)(Tabs.m.Panel,{value:"breakdown",pt:"xs",children:(0,jsx_runtime.jsx)(AssignmentBreakdown,{...props})})]})]})})}AssignmentPage.displayName="AssignmentPage";try{AssignmentPage.displayName="AssignmentPage",AssignmentPage.__docgenInfo={description:"AssignmentPage",displayName:"AssignmentPage",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"archived"'},{value:'"open"'},{value:'"assigned to me"'}]}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"AssignmentSummaryItemData[]"}},breakdown:{defaultValue:null,description:"",name:"breakdown",required:!0,type:{name:"AssignmentBreakdownItemData[]"}},grouping:{defaultValue:null,description:"",name:"grouping",required:!1,type:{name:"string[]"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:'{ accessorKey: string; header: string; filterVariant?: "select" | "text" | "checkbox" | "date" | "date-range" | "multi-select" | "range" | undefined; mantineFilterSelectProps?: { data: any; } | undefined; size?: number | undefined; }[]'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/assignment/AssignmentPage.tsx#AssignmentPage"]={docgenInfo:AssignmentPage.__docgenInfo,name:"AssignmentPage",path:"src/pages/assignment/AssignmentPage.tsx#AssignmentPage"})}catch(__react_docgen_typescript_loader_error){}const AssignmentPage_stories={title:"Page/AssignmentPage",component:AssignmentPage,tags:["autodocs"],parameters:{layout:"fullscreen"}},Template={args:{name:"Assignment #1",status:"open",summary:[{name:"An example question",submissions:[["An example response"],["Another example response"]]},{name:"Another example question",submissionCount:5},{name:"A chart example question",chart:!0,options:["A. An example response","B. Another example response","C. Three","D. Four","E. Five"],submissions:[["A. An example response"],["B. Another example response"],["B. Another example response"]]}],breakdown:[{assignee:"John Doe",status:"In Progress",reflection:"","Lesson #1":"In Progress","An example question?":"An example response"}]},render:args=>(0,jsx_runtime.jsx)("div",{className:"h-full w-full overscroll-none font-proxima",children:(0,jsx_runtime.jsx)(dist.VA,{children:(0,jsx_runtime.jsx)(AppLayout.L,{...args,page:(0,jsx_runtime.jsx)(AssignmentPage,{...args})})})})},Lesson={...Template,args:{...Template.args,columns:[{accessorKey:"An example question?",header:"An example question?"}]}},Badge={...Template,args:{...Template.args,summary:[{name:"Lesson #1",submissionCount:5}],columns:[{accessorKey:"Lesson #1",header:"Lesson #1",filterVariant:"select",mantineFilterSelectProps:{data:["Incomplete","In Progress","Complete"]},size:200}]}};Lesson.parameters={...Lesson.parameters,docs:{...Lesson.parameters?.docs,source:{originalSource:'{\n  ...Template,\n  args: {\n    ...Template.args,\n    columns: [{\n      accessorKey: "An example question?",\n      header: "An example question?"\n    }]\n  }\n}',...Lesson.parameters?.docs?.source}}},Badge.parameters={...Badge.parameters,docs:{...Badge.parameters?.docs,source:{originalSource:'{\n  ...Template,\n  args: {\n    ...Template.args,\n    summary: [{\n      name: "Lesson #1",\n      submissionCount: 5\n    }],\n    columns: [{\n      accessorKey: "Lesson #1",\n      header: "Lesson #1",\n      filterVariant: "select",\n      mantineFilterSelectProps: {\n        data: ["Incomplete", "In Progress", "Complete"]\n      },\n      size: 200\n    }]\n  }\n}',...Badge.parameters?.docs?.source}}};const __namedExportsOrder=["Lesson","Badge"]},"./src/components/assignment/styles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>useAssignmentStyles});var _mantine_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@mantine/styles/esm/tss/create-styles.js"),_mantine_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mantine/styles/esm/theme/utils/rem/rem.js");const useAssignmentStyles=(0,_mantine_core__WEBPACK_IMPORTED_MODULE_0__.k)((theme=>({card:{backgroundColor:"dark"===theme.colorScheme?theme.colors.dark[7]:theme.white,height:"max-content",width:"20rem"},section:{borderBottom:`${(0,_mantine_core__WEBPACK_IMPORTED_MODULE_1__.h)(1)} solid ${"dark"===theme.colorScheme?theme.colors.dark[4]:theme.colors.gray[3]}`,paddingLeft:theme.spacing.md,paddingRight:theme.spacing.md,paddingBottom:theme.spacing.md},userAvatar:{backgroundColor:"dark"===theme.colorScheme?theme.colors.dark[6]:theme.colors.blue[7]}})))}}]);